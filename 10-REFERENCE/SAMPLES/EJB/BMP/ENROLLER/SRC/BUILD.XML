<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Copyright (c) 2002 Sun Microsystems, Inc. All rights reserved. -->
<!DOCTYPE project [ <!ENTITY include SYSTEM "../../../../common.xml"> ]>

<!-- Copyright 2002 Sun Microsystems, Inc. All rights reserved. -->

  <!-- ======================================================= -->
  <!--  Sun ONE Application Server Sample Application build xml -->
  <!-- ======================================================= -->

  <project name="enroller" default="core" basedir=".">

  <!-- ======================================================= -->
  <!--			 App name-dependent settings.				   -->
  <!-- ======================================================= -->

  <property name="appname" value="bmp-enroller"/>
  <property name="sample.home" value="../../../../"/>
  <property name="sample.name" value="Enroller"/>

  <!-- ======================================================= -->
  <!--			 Package directory structures of interest.	   -->
  <!-- ======================================================= -->

  <property name="app.pkg" value="samples/ejb/bmp/enroller/client"/>
  <property name="jar.pkg" value="samples/ejb/bmp/enroller/ejb"/>
 
  <!-- ======================================================= -->
  <!--			Java Doc properties .					       -->
  <!-- ======================================================= -->
  <property name="sample.name" value="enroller"/>
  <property name="javadoc.pkgnames" value="samples.ejb.bmp.enroller.*" />

  <!-- ======================================================= -->
  <!--			Xml files properties .					       -->
  <!-- ======================================================= -->
  <property name="jarDD" value="ejb-jar.xml,sun-ejb-jar.xml"/>

  <!-- ======================================================= -->
  <!--				Include common.xml					       -->
  <!-- ======================================================= -->
 
  &include;
	

  <!-- ============================================================== -->
  <!--           Resource specific properties.                        -->
  <!-- ============================================================== -->

  <property name="conpool.name"       value="bmpEnrollerPool" />
  <property name="jdbc.resource.name" value="jdbc/bmp-enrollerDB" />

  <property name="db.user"  value="bmp"/>
  <property name="db.pwd"   value="bmp"/>
  <property name="ds.class" value="com.pointbase.jdbc.jdbcDataSource" />
  <property name="db.file"  value="sql/enroller.sql"/>
  <property name="url.prop" value="DatabaseName" />

  <!-- ======================================================= -->

 <target name="create-jdbc-connection-pool">
    <antcall target="admin_command_common">
      <param name="admin.command" value="create-jdbc-connection-pool --datasourceclassname com.pointbase.jdbc.jdbcDataSource bmpEnrollerPool --instance ${sunone.instance}" />
    </antcall>
  </target>

  <target name="delete-jdbc-connection-pool">
    <antcall target="admin_command_common">
      <param name="admin.command" value="delete-jdbc-connection-pool bmpEnrollerPool --instance ${sunone.instance}" />
    </antcall>
  </target>
 <target name="set-DatabaseName">
    <antcall target="admin_command_common">
      <param name="admin.command" value="set ${sunone.instance}.jdbc-connection-pool.bmpEnrollerPool.property.DatabaseName=jdbc:pointbase:server://localhost:9092/sun-appserv-samples" /> </antcall> </target>

  <target name="set-User">
    <antcall target="admin_command_common">
      <param name="admin.command" value="set ${sunone.instance}.jdbc-connection-pool.bmpEnrollerPool.property.User=bmp" />
    </antcall>
  </target>

  <target name="set-Password">
    <antcall target="admin_command_common">
      <param name="admin.command" value="set ${sunone.instance}.jdbc-connection-pool.bmpEnrollerPool.property.Password=bmp" />
    </antcall>
  </target>

<target name="create-jdbc-resource">
    <antcall target="admin_command_common">
      <param name="admin.command" value="create-jdbc-resource --connectionpoolid bmpEnrollerPool jdbc/bmp-enrollerDB --instance ${sunone.instance} " />
    </antcall>
  </target>

<target name="delete-jdbc-resource">
    <antcall target="admin_command_common">
      <param name="admin.command" value="delete-jdbc-resource jdbc/bmp-enrollerDB --instance ${sunone.instance}" />
</antcall>
  </target>

	  <!-- ======================================================= -->
	  <!--		Targets to build and deploy sample application      -->
  <!-- ======================================================= -->

<target name= "deploy_jdbc_resource" depends = "create-jdbc-connection-pool, set-DatabaseName, set-User,
 set-Password, create-jdbc-resource, reconfig"/>

  <target name= "undeploy_jdbc_resource" depends = "delete-jdbc-resource,delete-jdbc-connection-pool, reconfig" />


  <target name="sql"        depends="sql_common"/>
  <target name="reconfig" depends="reconfig_common"/>
  <target name="clean" depends="clean_common"/>
  <target name="init" depends="init_common"/>
  <target name="compile" depends="compile_common" />
  <target name="javadocs" depends="javadocs_common" />
  <target name="deploy" depends="init_common, deploy_common, deploy_jdbc_resource, reconfig"/>
  <target name="undeploy" depends="init_common, undeploy_common, undeploy_jdbc_resource, reconfig"/>
  <target name="verify" depends="verify_common"/>
  <target name="jar" depends="init,create_ejbjar_common"/>
  <target name="clientjar" depends="clientjar_common"/>
  <target name="ear" depends="init,jar,create_ear_common"/>
  <target name="core" depends="compile,jar, clientjar, ear" />
  <target name="all" depends="core,javadocs,verify,deploy"/>

</project>
