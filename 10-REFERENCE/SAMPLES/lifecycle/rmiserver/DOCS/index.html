<HTML lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <meta name="keywords" content="electronic commerce, ecommerce, ebusiness, e-business, e-commerce, enterprise software, net economy, Sun Microsystems, Sun Open Network Environment, Sun ONE, internet software">
        <meta name="description" content="Sun Microsystems, Inc., is delivering Sun ONE e-commerce software and enterprise solutions that enable companies to compete successfully in the Net Economy.">
	<META NAME="templatebase" manual wdt 1.7.0 OAK

rebranded for Sun ONE
06-18-02">
	<meta name="LastUpdated" content="07/10/02 11:50:31">
	<title> Lifecycle RMIServer Application:  Lifecycle RMIServer Application</title>
</head>

<body text="#000000" link="#594fbf" vlink="10% #594fbf" alink="#333366" bgcolor="#FFFFFF">

<MAINCONTENT>

<NAVIGATIONCONTENT>
   <TABLE WIDTH="100%" BORDER="0" CELLSPACING="4">
      <TR>
         <td VALIGN="TOP">
            <A HREF="http://wwws.sun.com/software">
              <IMG SRC="../../../docs/images/SunONE.jpg" alt="Sun ONE logo" 
                valign="BOTTOM"
                height="40" width="120" border="0"></A>
             &nbsp;&nbsp;&nbsp;&nbsp;
         </td>
     </TR>

      <TR>
         <TD VALIGN="TOP" ALIGN="RIGHT" BGCOLOR="#594fbf">
            <FONT FACE="Helvetica, Arial, sans-serif" COLOR="#ffffff" SIZE="-1"><B>
             Lifecycle RMIServer Application</B></FONT>
         </TD>
      </TR>

   </TABLE>
   <BR>
</NAVIGATIONCONTENT>

<BOOKCONTENT>
   <BLOCKQUOTE>
<BR>
<BR>

      <A NAME="8063"> </A>
<A NAME="Lifecycle RMIServer Application"> </A>
<FONT FACE="Helvetica, Arial, Sans-Serif" SIZE="+1" COLOR="#000000">
<B>
Lifecycle RMIServer  Application
</B>
</FONT>
<BR>
<BR>
<BR>

<A NAME="16924"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This document describes how to utilize the Lifecycle (RMIServer) sample application in conjunction with the Sun ONE Application Server version 7.
</FONT>
<P>

<A NAME="14787"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample application document contains the following sections:
</FONT>
<P>
<ul>
<A NAME="14789"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="#14799"  >Overview</A>
</FONT>
<P><A NAME="14790"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15909"  >Compiling and Assembling the Application</A>
</FONT>
<P><A NAME="14791"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14836"  >Deploying the Sample Application</A>
</FONT>
<P><A NAME="14792"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14943"  >Running the Sample Application</A>
</FONT>
<P><A NAME="14794"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14976"  >Troubleshooting</A>
</FONT>
<P></ul>

<BR>
<BR>

<A NAME="14799"> </A>
<A NAME="Overview"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Overview
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="14801"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample is based on the LifecycleListener interface support provided by Sun ONE Application Server. This sample demonstrates the capability to bring up and shutdown a remote service (in this sample, an RMI server) from a custom lifecycle module in the Sun ONE Application server. 
</FONT>
<P>

<A NAME="14803"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The following instructions describe how to assemble, deploy on the Application Server, and how to run the application. Although the sample application offers minimal functionality, this sample should provide you with a basic understanding of startup class support in the Sun One Application Server.
</FONT>
<P>

</FONT>
<P>
<BR>
<P>
<A NAME="17807"> </A>
<A NAME="Configuration"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Configuration
</B>
</FONT>
<BR>
<BR>

<A NAME="17813"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The <FONT FACE="courier, couriernew, monospaced size">server.policy</FONT> file located under <FONT FACE="courier, couriernew, monospaced size"><i>&lt;install_dir&gt;</i>/domains/domain1/server1/config</FONT> needs to be manually modified for the sample to work.</FONT>
</FONT>
<P>

<A NAME="17816"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Old:   <FONT FACE="courier, couriernew, monospaced size">permission java.net.SocketPermission ""*", "connect";</FONT>;
</FONT>
<P>

<A NAME="17811"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">New:  <FONT FACE="courier, couriernew, monospaced size">permission java.net.SocketPermission ""*", "connect</FONT>,<FONT FACE="courier, couriernew, monospaced size"><B>accept,resolve,listen</B>"</FONT>;
</FONT>
<p>
<A NAME="17816"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Old:   <FONT FACE="courier, couriernew, monospaced size">permission java.io.FilePermission "&lt;&lt;ALL FILES&gt;&gt;", "read,write";</FONT>
</FONT>
<P>
<A NAME="17811"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">New:  <FONT FACE="courier, couriernew, monospaced size">permission java.io.FilePermission "&lt;&lt;ALL FILES&gt;&gt;", "read,write</FONT>, <FONT FACE="courier, couriernew, monospaced size"><B>execute</B></FONT>";
</FONT>
<P>




<P>

<BR>
<BR>

<A NAME="15909"> </A>
<A NAME="Compiling and Assembling the Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Compiling and Assembling the Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15910"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This <A HREF="index.html#14815"  >Command Line Based Compilation and Assembly</A> procedure describes how to assemble and compile the sample using a Command Line Interface (CLI).
</FONT>
<P>
<P>
<BR>
<A NAME="14815"> </A>
<A NAME="Command Line Based Compilation and Assembly"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Command Line Based Compilation and Assembly
</FONT>
<BR>
<BR>


<BR>
<P>
<A NAME="14817"> </A>
<A NAME="To rebuild the entire application from scratch:"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
To rebuild the entire application from scratch:
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="14819"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Compile and Assemble.
</FONT>
<P>
     <DT> <A NAME="14821"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the<FONT FACE="courier, couriernew, monospaced size"> asant </FONT>command under &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/src/</FONT>
</FONT>
<P>     <DT> <A NAME="14822"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
[please add &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/bin to your path</FONT>]
</FONT>
<P>     <DT> <A NAME="14824"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
The default target core is executed to rebuild the<FONT FACE="courier, couriernew, monospaced size"> .jar </FONT>file.
</FONT>

<P>
<A NAME="14826"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
For this sample we need to create a policy file <FONT FACE="courier, couriernew, monospaced size">lifecycle-rmi.policy</FONT>.
Content of this file looks as follows:
<p>
<FONT FACE="courier, couriernew, monospaced size">
grant { 
  permission java.security.AllPermission; 
}; 
</FONT>
<P>
<A NAME="14828"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Modify property named <FONT FACE="courier, couriernew, monospaced size">policy.file</FONT> in 
<FONT FACE="courier, couriernew, monospaced size">build.xml</FONT> to point it to the 
<FONT FACE="courier, couriernew, monospaced size">lifecycle-rmi.policy</FONT> file location.
<p>
<FONT FACE="courier, couriernew, monospaced size">
</FONT>
<P>
<A NAME="14826"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="4"></B>
Deploy the application.
</FONT>
<P>
     <DT> <A NAME="14827"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
When you have re-created the sample application from scratch, proceed to Deploying the application.
</FONT>
<P>
<A NAME="14829"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="5"></B>
Clean the application project area.
</FONT>
<P>
     <DT> <A NAME="14830"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the<FONT FACE="courier, couriernew, monospaced size"> asant clean </FONT>command to remove the sample application's assemble and build directories.
</FONT>
<P>     <DT> <A NAME="14833"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Now you are ready to use this<FONT FACE="courier, couriernew, monospaced size"> .jar </FONT>file for deployment.
</FONT>
<P>
</ol>

<BR>
<BR>

<A NAME="14836"> </A>
<A NAME="Deploying the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Deploying the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="14838"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Select one of the following approaches to deploy the application:
</FONT>
<P>
<ul>
<A NAME="14840"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14846"  >Command Line Based Deployment</A> describes how to manually register the application in a Sun ONE Application Server using a Command Line Interface (CLI). This is the fastest means of deploying the application.
</FONT>
<P><A NAME="14843"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15432"  >GUI Based Deployment</A> describes how to use the Sun ONE Deployment Tool to import and deploy the sample application.
</FONT>
<P></ul>
<P>
<BR>
<A NAME="14846"> </A>
<A NAME="Command Line Based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Command Line Based Deployment
</FONT>
<BR>
<BR>



<A NAME="14848"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a complete <FONT FACE="courier, couriernew, monospaced size">.jar</FONT> file is supplied, the fastest means of setting up the application is to use the command line utilities as described in this section.
</FONT>
<P>

<A NAME="16077"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you want to deploy through a GUI tool, follow the instructions for <A HREF="index.html#15432"  >GUI Based Deployment</A>.
</FONT>
<P>

<A NAME="14852"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The pre-built<FONT FACE="courier, couriernew, monospaced size"> lifecycle-rmiserver.jar  </FONT>file contains the Java Archive (JAR) files of the application.
</FONT>
<P>

</FONT>
<P>

<A NAME="16011"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Deploy using either the <FONT FACE="courier, couriernew, monospaced size">asant</FONT> script or the<FONT FACE="courier, couriernew, monospaced size"> asadmin </FONT>command.
</FONT>
<P>
<BR>
<P>
<A NAME="14858"> </A>
<A NAME="Using the asant Script"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Using the asant Script
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="15255"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the<FONT FACE="courier, couriernew, monospaced size"> src </FONT>directory of the sample:
</FONT>
<P>  <dl>
     <DT> <A NAME="16664"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/src</FONT>
</FONT>
<P>  </dl>
<A NAME="16665"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the<FONT FACE="courier, couriernew, monospaced size"> asant deploy </FONT>command.
</FONT>
<P></ol>
<BR>
<P>
<A NAME="16666"> </A>
<A NAME="Using the asadmin Command"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Using the asadmin Command
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="14870"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the root of the sample directory:
</FONT>
<P>  <dl>
     <DT> <A NAME="16064"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/</FONT>
</FONT>
<P>  </dl>
<A NAME="14874"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the<FONT FACE="courier, couriernew, monospaced size"> asadmin </FONT>command to deploy the application to the local application server instance:
</FONT>
<P>  <dl>
     <DT> <A NAME="16096"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin create-lifecycle-module -u </FONT>&lt;<I>user-name</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -w </FONT>&lt;<I>password</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -H </FONT>&lt;<I>hostname</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -p </FONT>&lt;<I>admin server port</I>&gt;<FONT FACE="courier, couriernew, monospaced size">  --classname samples.lifecycle.rmiserver.LifecycleListenerImpl --classpath </FONT>&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/src/../lifecycle-rmiserver.jar lifecycle-rmiserver
</FONT>
<P>  </dl>
</ol>

<A NAME="14879"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The deployment process involves the following operations:
</FONT>
<P>
<ul>
<A NAME="14880"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
It authenticates against the local application server's administrative server.
</FONT>
<P><A NAME="16141"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The<FONT FACE="courier, couriernew, monospaced size"> .jar</FONT> file is transferred to the administrative server.
</FONT>
<P><A NAME="16146"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The administrative server begins the registration process:
</FONT>
<P>  <ul>
<A NAME="16149"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Parses the<FONT FACE="courier, couriernew, monospaced size"> .jar </FONT>file.
</FONT>
<P><A NAME="16157"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Explodes the bits into the repository.
</FONT>
<P><A NAME="16160"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Registers the J2EE application<FONT FACE="courier, couriernew, monospaced size"> lifecycle-rmiserver </FONT>by updating the<FONT FACE="courier, couriernew, monospaced size"> server.xml</FONT> file.
</FONT>
<P>    <dl>
       <DT> <A NAME="16171"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
If you want to verify the registration of the application, proceed to the <A HREF="index.html#14924"  >Verifying Registration</A> section.
</FONT>
<P>       <DT> <A NAME="16180"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Otherwise, you are ready to exercise the application by <A HREF="index.html#14943"  >Running the Sample Application</A>.
</FONT>
<P>    </dl>
  </ul>
</ul>
<P>
<BR>
<A NAME="15432"> </A>
<A NAME="GUI Based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
GUI Based Deployment
</FONT>
<BR>
<BR>



<A NAME="15433"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a pre-built (<FONT FACE="courier, couriernew, monospaced size">.jar</FONT>) file for the sample application is included with the application server, you can use the Admin Tool to quickly read in the<FONT FACE="courier, couriernew, monospaced size"> .jar </FONT>file and deploy it to the application server.
</FONT>
<P>
<ol type="1">
<P><A NAME="14898"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Start the admin server if it is not already started.
</FONT>
<P>  <dl>
     <DT> <A NAME="14900"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
UNIX
</FONT>
<P>  </dl>
  <ol type="a">
<A NAME="14902"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Goto &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/domains/domain1/admin-server/bin</FONT>.
</FONT>
<P><A NAME="14904"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Execute the<FONT FACE="courier, couriernew, monospaced size"> startserv </FONT>command.
</FONT>
<P>  </ol>
  <dl>
     <DT> <A NAME="14906"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Windows
</FONT>
<P>  </dl>
  <ol type="a">
<A NAME="14908"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Goto &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">\domains\domain1\admin-server\bin</FONT>
</FONT>
<P><A NAME="14910"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Run<FONT FACE="courier, couriernew, monospaced size"> startserv</FONT>.
</FONT>
<P>  </ol>
<A NAME="14912"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Open the<FONT FACE="courier, couriernew, monospaced size"> .jar </FONT>file.
</FONT>
<P>  <ol type="a">
<A NAME="16329"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Navigate to the browser based admin server page [<FONT FACE="courier, couriernew, monospaced size">http://</FONT>&lt;<I>server-host</I>&gt;<FONT FACE="courier, couriernew, monospaced size">:</FONT>&lt;<I>admin-port</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/index.html</FONT>].
</FONT>
<P><A NAME="16330"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Enter your username and password to access the admin server.
</FONT>
<P><A NAME="16331"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Click <FONT FACE="courier, couriernew, monospaced size">App Server Instances&gt;server1&gt;Applications&gt;Lifecycle Modules
</FONT>.
<P><A NAME="14917"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
In the right hand pane, click <FONT FACE="courier, couriernew, monospaced size">Deploy</FONT> to deploy an application.
</FONT>
<P><A NAME="16340"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Fill in the Module Name, Classname and Classpath</FONT>.
</FONT>
<P><A NAME="16344"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Fill in Load order(Optional). Load order expects integer value which can be used to force the order in which deployed lifecycle modules are loaded at server startup. Smaller numbered modules get loaded sooner. Order is unspecified if two or more lifecycle modules have the same load-order value.
</FONT>
<P><A NAME="16344"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
You may also choose the relevent boolean values for Fatal faliure.
</FONT>
<P><A NAME="16344"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
You must also set the <FONT FACE="courier, couriernew, monospaced size">Enable</FONT> flag to true in order to load this module at the time of server startup.
</FONT>
<P><A NAME="16345"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Click on properties and set one property, <FONT FACE="courier, couriernew, monospaced size">policy.file</FONT> to 
<FONT FACE="courier, couriernew, monospaced size">lifecycle-rmi.policy</FONT>.
</FONT>

<P>    </dl>
<A NAME="16359"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value ="4"></B>
A typical set of values for these attributes will be:</FONT>
<FONT FACE="courier, couriernew, monospaced size">
<P>    <dl><dl>
       <DT> <A NAME="14920"> </A>
  Name        lifecycle-rmiserver 
<P>    
       <DT> <A NAME="14920"> </A>
  ClassName  samples.lifecycle.rmiserver.LifecycleListenerImpl
<P>   
       <DT> <A NAME="14920"> </A>
  ClassPath   <I><install_dir></I>/samples/lifecycle/rmiserver/src/../lifecycle-rmiserver.jar 
</FONT>
<p>
       <DT> <A NAME="14920"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Click OK.
</FONT>
<P>    
       <DT> <A NAME="14920"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
If the deployment goes through properly, you see the original pane with the<FONT FACE="courier, couriernew, monospaced size"> lifecycle-rmiserver </FONT>application as deployed.
</FONT>
<P>    </dl>
  </ol>
</ol>

<HR SIZE="1">
<TABLE BORDER="0" CELLPADDING="5" WIDTH="75%">
  <TR>
    <TD VALIGN=TOP>
<A NAME="17191"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Note
</B>
</FONT>

</TD>
    <TD VALIGN=TOP>
    <A NAME="14957"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Once the sample is deployed, server.xml should look as follows:</FONT>
<p>
<FONT FACE="courier, couriernew, monospaced size">
&lt;lifecycle-module is-failure-fatal="false" enabled="true" class-name="samples.lifecycle.rmiserver.LifecycleListenerImpl" name="
lifecycle-rmiserver" classpath="<I>&lt;install_dir&gt;</I>/samples/lifecycle/rmiserver/src/../lifecycle-rmiserver.jar"&gt;
      &lt;property value="<I>&lt;install_dir&gt;</I>/domains/domain1/server1/config/lifecycle-rmi.policy" name="policy.file"/&gt;
    &lt;/lifecycle-module&gt;
</FONT>
</TD>
  </TR>
</TABLE>

<HR SIZE="1">
<P>
<BR>
<A NAME="14924"> </A>
<A NAME="Verifying Registration"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Verifying Registration
</FONT>
<BR>
<BR>



<A NAME="14926"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">As an optional step, you can use the Sun ONE Application Server Administration Tool to verify that the application has been registered.
</FONT>
<P>

<A NAME="16417"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you do not want to verify that the application has been registered, proceed directly to <A HREF="index.html#14943"  >Running the Sample Application</A>.
</FONT>
<P>
<BR>
<P>
<A NAME="14930"> </A>
<A NAME="To verify the registration of the application:"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
To verify the registration of the application:
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="16467"> </A>
<P>
<A NAME="14938"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Navigate the Admin tool GUI to App Server Instances&gt;server1&gt;Applications&gt;Lifecycle Modules.
</FONT>
<P><A NAME="16509"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Click Lifecycle modules on the left frame menu to display a list of applications deployed on the server.
</FONT>
<P></ol>

<BR>
<BR>


<A NAME="14943"> </A>
<A NAME="Running the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Running the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>

<A NAME="17811"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Prior to running the sample, ensure that you have performed the following steps:
</FONT>
<P>
<ol type="1">
<A NAME="17812"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Run the <FONT FACE="courier, couriernew, monospaced size">rmiregistry</FONT>.
</FONT>
<P>  <dl>
     <DT> <A NAME="14900"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
UNIX
</FONT>
<P>  </dl>
  <ol type="a">
<A NAME="14902"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
set your env variable CLASSPATH to&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/lifecycle-rmiserver.jar</FONT>.
</FONT>
<P>
<A NAME="14902"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Goto &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/jdk/bin/</FONT>.
</FONT>
<P>
<A NAME="14904"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Execute the<FONT FACE="courier, couriernew, monospaced size"> rmiregistry </FONT>command.
</FONT>
<P>  </ol>
  <dl>
     <DT> <A NAME="14906"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Windows
</FONT>
<P>  </dl>
  <ol type="a">
<A NAME="14902"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
set your env variable CLASSPATH to&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">\samples\lifecycle\rmiserver\lifecycle-rmiserver.jar</FONT>.
</FONT>
<P>
<A NAME="14908"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Goto &lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">\jdk\bin\</FONT>
</FONT>
<P><A NAME="14910"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Execute<FONT FACE="courier, couriernew, monospaced size"> start rmiregistry </FONT>command.
</FONT>
<P>  </ol>

<P><A NAME="17814"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
You must set the classpath for running the sample. Here is how you can do it:
</FONT>
<P>
<P>
<ol type="a">
<A NAME="14946"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Login to admin using <FONT FACE="courier, couriernew, monospaced size">http://hostname:port-number/</FONT>
<P><A NAME="14947"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Click <FONT FACE="courier, couriernew, monospaced size">App Server Instances&gt;server1&gt;JVM Settings&gt;Path Settings&gt;Classpath Suffix
</FONT>
<P><A NAME="14947"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Append <FONT FACE="courier, couriernew, monospaced size"> lifecycle-rmiserver.jar</FONT> to the classpath
</FONT>
</ol>

<P><A NAME="17813"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Since this is a startup class, you need to stop and start the application server instance.
</FONT>
<P>
<P>
<ol type="a">
<A NAME="14946"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
asadmin stop-instance -
H </FONT>&lt;<I>hostname</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -p </FONT>&lt;<I>admin server port</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -u </FONT>&lt;<I>user-name</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -w </FONT>&lt;<I>password</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> </FONT>&lt;<I>server-instance name</I>&gt;<FONT FACE="courier, couriernew, monospace">
</FONT>
<P><A NAME="14947"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
asadmin start-instance -H </FONT>&lt;<I>hostname</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -p </FONT>&lt;<I>admin server port</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -u </FONT>&lt;<I>user-name</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -w </FONT>&lt;<I>password</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> </FONT>&lt;<I>server-instance name</I>&gt;<FONT FACE="courier, couriernew, monospace">
</FONT>
</ol>
<P>
<br>     <DT> <A NAME="16543"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
After the server has started, go to the log file of the server instance and look for the following messages:
</FONT>

<P>       <DT> <A NAME="16545"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">...
<br>
Lifecycle rmiserver sample: STARTUP_EVENT
<br>
Creating SampleRMIServer
<br>
SampleRMIServer bound
<br>
In start() of SampleRMIServer
</FONT>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<P>
Then stop the server and  go to the log file of the server instance and look for the following messages:
</FONT>
<P>
       <DT> <A NAME="16544"> </A>
<FONT FACE="courier, couriernew, monospaced size">...
<br>
Lifecycle rmiserver sample: SHUTDOWN_EVENT
<br>
In stop() of SampleRMIServer
<br>
Destroying SampleRMIServer
<br>
</FONT>

<P></ul>
</TD>
  </TR>
</TABLE>

<HR SIZE="1">
<BR>

</FONT>
<P>
<BR>
<A NAME="14961"> </A>
<A NAME="Generating Javadocs"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Generating Javadocs
</FONT>
<BR>
<BR>



<A NAME="14963"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To understand sample application source code better, you can refer to the related javadocs. To generate javadocs, run the command
</FONT>
<P>
<dl>  <dl>
     <DT> <A NAME="16579"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant javadocs</FONT>
</FONT>
<P>     <DT> <A NAME="14967"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
or
</FONT>
<P>     <DT> <A NAME="14968"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant all</FONT>
</FONT>
<P>  </dl>
</dl>
<A NAME="14970"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">After javadocs are generated, you can access them at 
</FONT>
<P>

<A NAME="14972"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">&lt;<I>install_dir</I>&gt;<FONT FACE="courier, couriernew, monospaced size">/samples/lifecycle/rmiserver/javadocs/index.html</FONT>
</FONT>
<P>

<BR>
<BR>

<A NAME="14976"> </A>
<A NAME="Troubleshooting"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Troubleshooting
<HR SIZE="2" NOSHADE>
</FONT>
<BR>

<ul>
<A NAME="29764"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
If you get a java.net.ConnectException, make sure that your server.policy is modified as defined. After modifying server.policy, you need to "Apply Changes" (AdminGUI->serverInstance->ApplyChanges) and restart the server instance.
</FONT>
<P><A NAME="29766"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
If you get a java.rmi.NotBoundException, make sure that the CLASSPATH is set as defined before starting rmiregistry, and check the path of policy.file in build.xml. 
</FONT>
<P><A NAME="29768"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
 review the log files at <install_dir>/domains/domain1/<server-instance>/logs/server.log to see what went wrong. 
</FONT>
<P><A NAME="29770"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Make certain that you run asant undeploy before redeploying this sample to make sure that all modules are undeployed and the resources are disabled. 
</FONT>
<P></ul>



   </BLOCKQUOTE>
</BOOKCONTENT>

<FOOTERCONTENT>
   <BLOCKQUOTE>
 <BR>
           
        <HR NOSHADE SIZE="1">


   
<!-- start copyright -->
<font face="Helvetica, Arial, sans-serif" size="-2">
Copyright &#169; 2002 <a href="http://sun.com">Sun Microsystems, Inc.</a> 
All rights reserved.
</font>
<!--  end copyright  -->
   </BLOCKQUOTE>
   <FONT FACE="Helvetica, Arial, sans-serif" SIZE="-2">
   <P ALIGN="RIGHT">Last Updated <B>July 10, 2002</B>
   </FONT>
   <BR>

</FOOTERCONTENT>

</MAINCONTENT>

</BODY>


</HTML>
