<HTML lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <meta name="keywords" content="electronic commerce, ecommerce, ebusiness, e-business, e-commerce, enterprise software, net economy, Sun Microsystems, Sun Open Network Environment, Sun ONE, internet software">
        <meta name="description" content="Sun Microsystems, Inc., is delivering Sun ONE e-commerce software and enterprise solutions that enable companies to compete successfully in the Net Economy.">
	<META NAME="templatebase" manual wdt 1.7.0 OAK

rebranded for Sun ONE
06-18-02">
	<meta name="LastUpdated" content="07/18/02 14:29:21">
	<title>Simple Javamail Sample Application:  Simple Javamail Sample Application</title>
</head>

<body text="#000000" link="#594fbf" vlink="10% #594fbf" alink="#333366" bgcolor="#FFFFFF">

<MAINCONTENT>

<NAVIGATIONCONTENT>
   <TABLE WIDTH="100%" BORDER="0" CELLSPACING="4">
      <TR>
         <td VALIGN="TOP">
            <A HREF="http://wwws.sun.com/software">
              <IMG SRC="../../../docs/images/SunONE.jpg" alt="Sun ONE logo" 
                valign="BOTTOM"
                height="40" width="120" border="0"></A>
             &nbsp;&nbsp;&nbsp;&nbsp;
         </td>
     </TR>

      <TR>
         <TD VALIGN="TOP" ALIGN="RIGHT" BGCOLOR="#594fbf">
            <FONT FACE="Helvetica, Arial, sans-serif" COLOR="#ffffff" SIZE="-1"><B>
            Simple Javamail Sample Application</B></FONT>
         </TD>
      </TR>

   </TABLE>
   <BR>
</NAVIGATIONCONTENT>

<BOOKCONTENT>
   <BLOCKQUOTE>
<BR>
<BR>

      <A NAME="15913"> </A>
<A NAME="Simple Javamail Sample Application"> </A>
<FONT FACE="Helvetica, Arial, Sans-Serif" SIZE="+1" COLOR="#000000">
<B>
Simple Javamail Sample Application
</B>
</FONT>
<BR>
<BR>
<BR>

<A NAME="15115"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This document describes how to utilize the Javamail
 sample application in conjunction with Sun ONE Application Server version 7.
</FONT>
<P>

<A NAME="15119"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample application document contains the following sections:
</FONT>
<P>
<ul>
<A NAME="15123"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14805"  >Overview</A>
</FONT>
<P><A NAME="15153"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14862"  >Compiling and Assembling the Application</A>
</FONT>
<P><A NAME="15154"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#19434"  >Deploying the Sample Application</A>
</FONT>
<P><A NAME="15155"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#20120" >Creating/Deleting Java Mail Resource</A>
</FONT>
<P><A NAME="15158"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#20121"  >Running the Sample Application</A>
</FONT>
<P><A NAME="15139"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15009"  >Troubleshooting</A>
</FONT>
<P></ul>

<BR>
<BR>

<A NAME="14805"> </A>
<A NAME="Overview"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Overview
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="19899"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
The simple Javamail sample application demonstrates the usage of JavaMail API. The application uses EJB for sending an e-mail. The EJB is invoked by a client class. 
</FONT>
<P>

<A NAME="19904"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To better understand sample application source code, you may refer to the related javadocs which can be accessed at <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/javadocs/index.html</FONT>  after it is generated.
</FONT>
<P>

<BR>
<BR>

<A NAME="14862"> </A>
<A NAME="Compiling and Assembling the Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Compiling and Assembling the Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="14865"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This section contains instructions to compile and assemble the Simple Javamail sample application.
</FONT>
<P>
<ol type="1">
<A NAME="19415"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/src/ </FONT>
</FONT>
<P>  <dl>
     <DT> <A NAME="19371"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the command <FONT FACE="courier, couriernew, monospaced size">asant</FONT>
</FONT>
<P>     <DT> <A NAME="19369"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
     
<BR>
<HR SIZE="1">
<TABLE BORDER="0" CELLPADDING="5" WIDTH="75%">
  <TR>
    <TD VALIGN=TOP>
<A NAME="19384"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Note
</B>
</FONT>

</TD>
    <TD VALIGN=TOP>
<A NAME="19386"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You must add <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/bin</FONT> to your path.
</FONT>
<P>
</TD>
  </TR>
</TABLE>

<HR SIZE="1">
<BR>

</FONT>
<P>     <DT> <A NAME="19398"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
The default target core will be executed to build the JAR and EAR files.
</FONT>
<P>  </dl>
<A NAME="14885"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Deploy the application.
</FONT>
<P>  <dl>
     <DT> <A NAME="16257"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
After you have re-created the sample application from scratch, you may proceed to <A HREF="index.html#19434"  >Deploying the Sample Application</A>.
</FONT>
<P>  </dl>
<A NAME="14889"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Clean the web application project area (optional).
</FONT>
<P>  <dl>
     <DT> <A NAME="19426"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the command <FONT FACE="courier, couriernew, monospaced size">asant clean</FONT> to remove the assemble and
build directories of the sample application.
</FONT>
<P>  </dl>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Generate javadocs (optional).
</FONT>
<P>  <dl>
     <DT>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the command <FONT FACE="courier, couriernew, monospaced size">asant javadocs</FONT>
</FONT>
<P>  </dl>
</ol>

<BR>
<BR>

<A NAME="19434"> </A>
<A NAME="Deploying the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Deploying the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="18251"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">In this section, you will learn how to deploy the Simple Javamail sample application.
</FONT>
<P>

<A NAME="14535"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Select one of the following approaches to deploying
the application:
</FONT>
<P>
<ul>
<A NAME="14539"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14545"  >Command Line-based Deployment</A> describes how to manually register the application in Sun ONE
 Application Server using a Command Line Interface (CLI). This is the fastest means of deploying the sample application.
</FONT>
<P><A NAME="14543"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14582"  >GUI-based Deployment</A> describes how to use the Sun ONE Application Server Deployment Tool to
 import and deploy the sample application.
</FONT>
<P></ul>
<P>
<BR>
<A NAME="14545"> </A>
<A NAME="Command Line-based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Command Line-based Deployment
</FONT>
<BR>
<BR>
<A NAME="14546"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a complete EAR file is supplied, the fastest 
means of setting up the application is to use the command line utilities described in this section.
</FONT>
<P>

<A NAME="14547"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The pre-built 
<FONT FACE="courier, couriernew, monospaced size"> javamail-simple.ear</FONT> file is an Enterprise Archive file 
that contains the JAR file of the application. Within the JAR file resides the XML deployment descriptor files, 
application class files, and other content required by the application.
</FONT>
<P>

<A NAME="18274"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Deploying the pre-built 
<FONT FACE="courier, couriernew, monospaced size">javamail-simple.ear</FONT> file is simple. 
You may deploy by either <A HREF="index.html#18308"  >Using the asant script</A> or by 
<A HREF="index.html#19456"  >Using the asadmin command</A>.
</FONT>
<P>
<P>
<BR>
<A NAME="18308"> </A>
<A NAME="Using the asant script"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<b>Using the asant script</b>
</FONT>
<BR>
<BR>

<ol type="1">
<A NAME="18309"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the <FONT FACE="courier, couriernew, monospaced size">src</FONT> directory of  the sample. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="18310"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/src</FONT>
</FONT>
<P>  </dl>

<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Edit the <FONT FACE="courier, couriernew, monospaced size">mail.properties</FONT> file to change the values of the following properties as per your configuration: 
</FONT>
<P>  <dl><DL>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">mailhost</FONT>
</FONT>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">mailuser</FONT>
</FONT>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">fromaddress</FONT>
</FONT>
<P>  </dl></dl>
<P>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
By default they are set to 
</FONT>
<P>  <dl><dl>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">mailhost=localhost</FONT>
</FONT>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">mailuser=xyz@foo.com</FONT>
</FONT>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">fromaddress=nobody </FONT>
</FONT>
<P>  </dl></dl>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Make  sure these values are changed according to your  mail client properties. 
</FONT>
<P><A NAME="18311"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Run asant using deploy task. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="18312"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant deploy</FONT>
</FONT>
<P>  </dl>
</ol>
<P>
<BR>
<A NAME="19456"> </A>
<A NAME="Using the asadmin command"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<b>Using the asadmin command</b>
</FONT>
<BR>
<BR>


<ol type="1">
<A NAME="19482"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/</FONT>
</FONT>
<P><A NAME="19500"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="19506"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin deploy -u &lt;user-name&gt; -w &lt;password&gt; -H &lt;hostname&gt; -p &lt;admin server port&gt; --instance &lt;instance name&gt; javamail-simple.ear</FONT>
</FONT>
<P>  </dl>
</ol>

<A NAME="19520"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The deployment process involves the following operations: 
</FONT>
<P>
<ul>
<A NAME="19521"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Authenticates against the local application server's administrative server.
</FONT>
<A NAME="19522"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The EAR file is transferred to the administrative server
</FONT>
<A NAME="19523"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The administrative server begins the registration process:
</FONT>
  <ul>
<A NAME="19524"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Parses the EAR file and embedded JAR file. 
</FONT>
<A NAME="19525"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Explodes the bits into repository.
</FONT>
<A NAME="19526"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Registers the J2EE application "javamail-simple" by updating <FONT FACE="courier, couriernew, monospaced size">server.xml</FONT>.
</FONT>

<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Creates the javamail mail resource required for running this application.
</FONT>

<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Reconfigures the application server instance for the newly added resource. 
</FONT>
<P>  </ul>
</ul>

<A NAME="19529"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you would like to verify the registration of the application, you may proceed to <A HREF="index.html#19560"  >Verifying Deployment</A>.  Otherwise, proceed to <A HREF="index.html#20121"  >Running the Sample Application</A>.
</FONT>
<P>
<P>
<BR>
<A NAME="14582"> </A>
<A NAME="GUI-based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
GUI-based Deployment
</FONT>
<BR>
<BR>
<A NAME="14583"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a pre-built Enterprise Archive (EAR) file for
the sample application is included with the application server, you can use the Sun One Application Server Administration 
Tool to quickly read the EAR file and deploy it to the Application Server.
</FONT>
<P>
<ol type="1">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
To deploy the application, the administrative server needs to be running. To start the admin server, execute the following: 
</FONT>
<P>  <dl>
     <DT> <A NAME="14585"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/domains/domain1/admin-server/bin/startserv</FONT>
</FONT>
<P>  </dl>

<A NAME="14584"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
From your web browser, access the Sun ONE Application Server by entering the URL. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="14585"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">http://&lt;server-host&gt;:&lt;admin-port&gt;</FONT>
</FONT>
<P>  </dl>
<A NAME="14586"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Enter the server administrator's username and password to access the admin server.
</FONT>
<P><A NAME="14587"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the left panel, navigate the tree by clicking on the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="14588"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
App Server Instances-&gt;server1-&gt;Applications-&gt;Enterprise Apps
</FONT>
<P>  </dl>
<A NAME="14589"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the right panel, click on the Deploy button.
</FONT>
<P>  <dl>
     <DT> <A NAME="14590"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Select the file (from disk) to be deployed (<FONT FACE="courier, couriernew, monospaced size">javamail-simple.ear</FONT>)
</FONT>
<P>     <DT> <A NAME="14591"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Click OK.
</FONT>
<P>  </dl>
<A NAME="14592"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
You will be prompted for the application name.
</FONT>
<P>  <dl>
     <DT> <A NAME="14593"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Type <FONT FACE="courier, couriernew, monospaced size">javamail-simple </FONT>
</FONT>
<P>     <DT> <A NAME="14594"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Click OK.
</FONT>
<P>  </dl>
</ol>

<A NAME="14595"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If the deployment processes correctly, you will see
the original panel displaying the javamail-simple application as deployed.
</FONT>
<P>
<P>
<BR>
<A NAME="19560"> </A>
<A NAME="Verifying Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Verifying Deployment
</FONT>
<BR>
<BR>



<A NAME="14912"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">As an optional step, you can use the Sun ONE Application Server Administration Tool to verify that the application has been registered. Otherwise, proceed directly to <A HREF="index.html#20121"  >Running the Sample Application</A>.
</FONT>
<P>

<A NAME="14915"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To verify the registration of the application, do the following:
</FONT>
<P>

<A NAME="15737"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Execute the command <FONT FACE="courier, couriernew, monospaced size">asadmin </FONT>to look at applications deployed with a server instance. For example:
</FONT>
<P>

<A NAME="20063"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><FONT FACE="courier, couriernew, monospaced size">asadmin list-components -u &lt;username&gt; -w &lt;password&gt; -H &lt;host&gt; -p &lt;admin-port&gt;  &lt;server instance name&gt;</FONT>
</FONT>
<P>

<A NAME="20064"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You will see the <FONT FACE="courier, couriernew, monospaced size">javamail-simple</FONT> application displayed as one of the listed components.
</FONT>
<P>
<P>
<BR>
<A NAME="20065"> </A>
<A NAME="Undeploying the application "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Undeploying the application 
</FONT>
<BR>
<BR>



<A NAME="19588"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you wish to undeploy the application after successful deployment, you may do so by either <A HREF="index.html#19590"  >Using the asant script</A> or by <A HREF="index.html#19594"  >Using the asadmin command</A>.
</FONT>
<P>
<BR>
<P>
<A NAME="19590"> </A>
<A NAME="Using the asant script "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the asant script </B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="19591"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/src</FONT>
</FONT>
<P><A NAME="19592"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant undeploy</FONT>
</FONT>
<P>  </dl>
</ol>
<BR>
<P>
<A NAME="19594"> </A>
<A NAME="Using the asadmin command "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the asadmin command </B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="19596"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/samples/javamail/simple/src</FONT>
</FONT>
<P><A NAME="20118"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="20127"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin undeploy -u &lt;user-name&gt; -w &lt;password&gt; -H &lt;hostname&gt; -p &lt;admin server port&gt; --instance &lt;instance name&gt;  javamail-simple</FONT>
</FONT>
<P>  </dl>
</ol>

<BR>
<BR>

<A NAME="20120"> </A>
<A NAME="Creating/Deleting Java Mail Resource"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Creating/Deleting Java Mail Resource
<HR SIZE="2" NOSHADE>
</FONT>
<BR>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
This section describes how to create and delete the Java Mail resource with Sun ONE Application Server.  The Java Mail resource is required for running the javamail-simple sample application. 
</FONT>
<P>
<BR>
<A NAME="Creating Java Mail Resource with Sun ONE Application Server"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Creating Java Mail Resource with Sun ONE Application Server 
</FONT>
<BR>
<BR>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
The java mail resource consists of the following properties and is created
when the application is deployed using <FONT FACE="courier, couriernew, monospaced size">asant deploy</FONT>. 
<P>  <dl><DL>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
     <DT>jndi name
     <DT>mail host
     <DT>mail user
     <DT>from address (return address)
     <DT>store protocol
     <DT>store protocol class
     <DT>transport protocol
     <DT>transport protocol class
</FONT>
<P>  </dl></dl>
<P>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
You don't need to create the java mail resource separately. However in the event the mail resource is removed, 
it can be created either through command line or using admin tool GUI. 
</FONT>
<P><A NAME="19594"> </A>
<A NAME="Using the asadmin command "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the asadmin command </B>
</FONT>
<BR>
<BR>

<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
Execute the following asadmin command:
</FONT>
<P>  <dl><dl>
     <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">
&lt;install_dir&gt;/bin/asadmin create-javamail-resource -u &lt;adminuser&gt; -w &lt;adminpassword&gt; -H &lt;hostname&gt; -p &lt;adminport&gt; [-s] [--instance &lt;instancename&gt;] --mailhost &lt;mailhostname&gt; --mailuser &lt;mailusername&gt; --fromaddress &lt;address&gt; [--storeprotocol=imap] [--storeprotocolclass=com.sun.mail.imap.IMAPStore] [--transprotocol=smtp] [--transprotocolclass=com.sun.mail.smtp.SMTPTransport] [--debug=false] [--enabled=true] [--description text] [--property (name=value)[:name=value]*] &lt;jndiname&gt; 
</FONT>
</FONT>
<P>  <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
where <FONT FACE="courier, couriernew, monospaced size">&lt;jndiname&gt;</FONT> has to be 
<FONT FACE="courier, couriernew, monospaced size">mail/MySession</FONT>
 if you don't plan to modify <FONT FACE="courier, couriernew, monospaced size">sun-ejb-jar.xml</FONT>. 
<P>  </dl></dl>
<P><A NAME="19594"> </A>
<A NAME="Using the Admin Tool GUI"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the Admin Tool GUI </B>
</FONT>
<BR>
<BR>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
To create the Java Mail resource using the Admin Tool GUI, do the following:
</FONT>
<P><ol type="1">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
From your web browser, enter the Sun ONE Application Server Administration Tool URL. For example: 
</FONT>
<P>  <dl>
     <DT> 
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">
http://&lt;server-host&gt;:&lt;admin-port&gt;
</FONT>
<P>  </dl>
<P><A NAME="14587"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the left panel, navigate the tree by clicking on the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="14588"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
App Server Instances-&gt;server1-&gt;Java Mail Sessions
</FONT>
<P>  </dl>
<A NAME="14589"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the right panel, click on the New button.
</FONT>
<P>  <dl>
     <DT>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Provide the values for mail resource properties as described above.
Note that you have to enter <FONT FACE="courier, couriernew, monospaced size">mail/MySession</FONT> as the value
of the JNDI Name if you don't plan to modify <FONT FACE="courier, couriernew, monospaced size">sun-ejb-jar.xml</FONT>. 
</FONT>
<P>  </dl>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Click OK.  The Java Mail resource will be created.
</FONT>

</ol>

<P>
<BR>
<A NAME="Deleting Java Mail Resource with Sun ONE Application Server"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Deleting Java Mail Resource with Sun ONE Application Server 
</FONT>
<BR>
<BR>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
The java mail resource is deleted when you give the command 
<FONT FACE="courier, couriernew, monospaced size"> asant undeploy</FONT>
 to undeploy the javamail-simple sample application. However in the event 
 the mail resource needs to be deleted, it can be done either through command line or using admin tool GUI.  
</FONT>
<P>
<A NAME="Using the asadmin command "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the asadmin command </B>
</FONT>
<BR>
<BR>

<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
Execute the following asadmin command:
</FONT>
<P>  <dl><dl>
     <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">
&lt;install_dir&gt;/bin/asadmin delete-javamail-resource -u &lt;adminuser&gt; -w &lt;adminpassword&gt; -H &lt;hostname&gt; -p &lt;adminport&gt; --instance &lt;instancename&gt; &lt;jndiname&gt;
</FONT>
</FONT>
<P>  <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
where <FONT FACE="courier, couriernew, monospaced size">&lt;jndiname&gt;</FONT> is the jndi name of the Java Mail resource
you've created. The default name is  <FONT FACE="courier, couriernew, monospaced size">mail/MySession</FONT>
 if you haven't modified <FONT FACE="courier, couriernew, monospaced size">sun-ejb-jar.xml</FONT>.
<P>  </dl></dl>
<P><A NAME="19594"> </A>
<A NAME="Using the Admin Tool GUI"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="3">
<B> Using the Admin Tool GUI </B>
</FONT>
<BR>
<BR>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
To create the Java Mail resource using the Admin Tool GUI, do the following:
</FONT>
<P><ol type="1">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
From your web browser, enter the Sun ONE Application Server Administration Tool URL. For example:
</FONT>
<P>  <dl>
     <DT>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">
http://&lt;server-host&gt;:&lt;admin-port&gt;
</FONT>
<P>  </dl>
<P><A NAME="14587"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the left panel, navigate the tree by clicking on the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="14588"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
App Server Instances-&gt;server1-&gt;Java Mail Sessions
</FONT>
<P>  </dl>
<A NAME="14589"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On the right panel, select the Java Mail resource that need to be deleted 
</FONT>
<P><FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Click the Delete button. Click OK to confirm the delete request. 
</FONT>

</ol>

<BR>
<BR>

<A NAME="20121"> </A>
<A NAME="Running the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Running the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="19766"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">
To run the application, do the following: 
</FONT>
<P> <ol type="1">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the directory  
<FONT FACE="courier, couriernew, monospaced size">&lt;install_dir&gt;/domains/domain1/&lt;server_instance&gt;/applications/j2ee-apps/javamail-simple_1/</FONT> 
</FONT>
<P>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="20127"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">
&lt;install_dir&gt;/bin/appclient -client javamail-simpleClient.jar -name javamail-simpleClient -textauth &lt;receiver_email_address&gt; 
</FONT>
<P>  </dl>
where <FONT FACE="courier, couriernew, monospaced size">&lt;receiver_email_address&gt;</FONT> is the e-mail address to which the message will be sent.
</ol>
<BR>

<A NAME="15009"> </A>
<A NAME="Troubleshooting"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Troubleshooting
<HR SIZE="2" NOSHADE>
</FONT>
<BR>

<ul>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Please make sure that you run <FONT FACE="courier, couriernew, monospaced size">asant undeploy</FONT> before redeploying this sample - this will make sure that all modules are undeployed and the resources are disabled. 
</FONT>
<P><FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Check  mail source properties to have proper value according to your mail client. 
</FONT>
<P><FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Although the  ear, context-root names in this sample are all "javamail-simple", 
 it is not necessary that it be so. The application will work as expected if the names of each of
 these attributes is unique. Rebuild the application after changing the context-root
 (in <FONT FACE="courier, couriernew, monospaced size">application.xml</FONT>), 
 and the ear names (in <FONT FACE="courier, couriernew, monospaced size">build.xml</FONT>), 
 redeploy and test the sample to confirm this. 
</FONT>
<P><FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
If you encounter problems when running the application, review the log files at 
<FONT FACE="courier, couriernew, monospaced size">&lt;install-root&gt;/domains/&lt;domain-instance&gt;/&lt;server-instance&gt;/logs/server.log</FONT> to learn what exactly went wrong.
</FONT>
<P></ul>
<P>

   </BLOCKQUOTE>
</BOOKCONTENT>

<FOOTERCONTENT>
   <BLOCKQUOTE>
 <BR>
           
        <HR NOSHADE SIZE="1">


   
<!-- start copyright -->
<font face="Helvetica, Arial, sans-serif" size="-2">
Copyright &#169; 2002 <a href="http://sun.com">Sun Microsystems, Inc.</a> 
All rights reserved.
</font>
<!--  end copyright  -->
   </BLOCKQUOTE>
   <FONT FACE="Helvetica, Arial, sans-serif" SIZE="-2">
   <P ALIGN="RIGHT">Last Updated <B>July 18, 2002</B>
   </FONT>
   <BR>

</FOOTERCONTENT>

</MAINCONTENT>

</BODY>


</HTML>
