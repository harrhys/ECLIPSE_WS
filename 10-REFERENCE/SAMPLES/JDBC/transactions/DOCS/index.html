<HTML lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <meta name="keywords" content="electronic commerce, ecommerce, ebusiness, e-business, e-commerce, enterprise software, net economy, Sun Microsystems, Sun Open Network Environment, Sun ONE, internet software">
        <meta name="description" content="Sun Microsystems, Inc., is delivering Sun ONE e-commerce software and enterprise solutions that enable companies to compete successfully in the Net Economy.">
	<META NAME="templatebase" manual wdt 1.7.0 OAK

rebranded for Sun ONE
06-18-02">
	<meta name="LastUpdated" content="07/11/02 18:21:27">
	<title>JDBC TRANSACTIONS Sample Application:  JDBC TRANSACTIONS Sample Application</title>
</head>

<body text="#000000" link="#594fbf" vlink="10% #594fbf" alink="#333366" bgcolor="#FFFFFF">

<MAINCONTENT>

<NAVIGATIONCONTENT>
   <TABLE WIDTH="100%" BORDER="0" CELLSPACING="4">
      <TR>
         <td VALIGN="TOP">
            <A HREF="http://wwws.sun.com/software">
              <IMG SRC="../../../docs/images/SunONE.jpg" alt="Sun ONE logo" 
                valign="BOTTOM"
                height="40" width="120" border="0"></A>
             &nbsp;&nbsp;&nbsp;&nbsp;
         </td>
     </TR>

      <TR>
         <TD VALIGN="TOP" ALIGN="RIGHT" BGCOLOR="#594fbf">
            <FONT FACE="Helvetica, Arial, sans-serif" COLOR="#ffffff" SIZE="-1"><B>
            JDBC TRANSACTIONS Sample Application</B></FONT>
         </TD>
      </TR>

   </TABLE>
   <BR>
</NAVIGATIONCONTENT>

<BOOKCONTENT>
   <BLOCKQUOTE>
<BR>
<BR>

      <A NAME="15913"> </A>
<A NAME="JDBC TRANSACTIONS Sample Application"> </A>
<FONT FACE="Helvetica, Arial, Sans-Serif" SIZE="+1" COLOR="#000000">
<B>
JDBC TRANSACTIONS Sample Application
</B>
</FONT>
<BR>
<BR>
<BR>

<A NAME="15115"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This document describes how to utilize the JDBC TRANSACTIONS sample application in conjunction with Sun ONE Application Server version 7.
</FONT>
<P>

<A NAME="15119"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample application document contains the following sections:
</FONT>
<P>
<ul>
<A NAME="15123"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14805"  >Overview</A>
</FONT>
<P><A NAME="15153"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#14862"  >Compiling and Assembling the Application</A>
</FONT>
<P><A NAME="15154"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#19434"  >Deploying the Sample Application</A>
</FONT>
<P><A NAME="15158"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#19746"  >Running the Sample Application</A>
</FONT>
<P><A NAME="15139"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15009"  >Troubleshooting</A>
</FONT>
<P></ul>

<BR>
<BR>

<A NAME="14805"> </A>
<A NAME="Overview"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Overview
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="19035"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample application demonstrates the jdbc transaction. A JDBC transaction is controlled by the transaction manager
of the DBMS. You may want to use JDBC transactions when wrapping legacy code inside a session bean. To code a JDBC transaction, you invoke the commit and rollback methods of the java.sql.Connection interface. The beginning of a transaction is implicit. A transaction begins with the first SQL statement that follows the most recent commit, rollback, or connect statement. (This
rule is generally true, but may vary with DBMS vendor.)
</FONT>
<P>

<A NAME="19286"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To better understand the sample application source code, refer to the related javadocs which can be accessed at <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/javadocs/index.html</FONT>  after it is generated.
</FONT>
<P>
<P>
<BR>
<A NAME="19288"> </A>
<A NAME="Setting up the environment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Setting up the environment
</FONT>
<BR>
<BR>



<A NAME="19336"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">In order to successfully deploy and run the JDBC TRANSACTIONS sample application, Database resources (<A HREF="../../../docs/pointbase.html">PointBase</A>) needs to be setup with the Application Server.
</FONT>
<A NAME="19336"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you want to run JDBC TRANSACTIONS sample application with Oracle database, please refer to (<A HREF="../../../docs/oracle.html">How to run samples with Oracle database server</A>) document.
</FONT>
<P>

<BR>
<BR>

<A NAME="14862"> </A>
<A NAME="Compiling and Assembling the Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Compiling and Assembling the Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="14865"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This section contains instructions to build and assemble the JDBC TRANSACTIONS sample application using a Command Line Interface (CLI).
</FONT>
<P>
<ol type="1">
<A NAME="19415"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/src/</FONT>
</FONT>
<P>  <dl>
     <DT> <A NAME="19371"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the command <FONT FACE="courier, couriernew, monospaced size">asant</FONT>
</FONT>
<P>     <DT> <A NAME="19369"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
     
<BR>
<HR SIZE="1">
<TABLE BORDER="0" CELLPADDING="5" WIDTH="75%">
  <TR>
    <TD VALIGN=TOP>
<A NAME="19384"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Note
</B>
</FONT>

</TD>
    <TD VALIGN=TOP>
<A NAME="19386"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You must add <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/bin</FONT> to your path.
</FONT>
<P>
</TD>
  </TR>
</TABLE>

<HR SIZE="1">
<BR>

</FONT>
<P>     <DT> <A NAME="19398"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
The default target core will be executed to build the EAR file.
</FONT>
<P>  </dl>
<A NAME="14885"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Deploy the application.
</FONT>
<P>  <dl>
     <DT> <A NAME="16257"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
After you have re-created the sample application from scratch, you may proceed to <A HREF="index.html#19434"  >Deploying the Sample Application</A>. <A HREF="index.html#14889"  >Step 3</A> is optional.
</FONT>
<P>  </dl>
<A NAME="14889"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Clean the application project area (optional).
</FONT>
<P>  <dl>
     <DT> <A NAME="19426"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Execute the command <FONT FACE="courier, couriernew, monospaced size">asant clean</FONT> to remove the sample application assemble and build directories.
</FONT>
<P>     <DT> <A NAME="19432"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Now you are ready to use this ear file for deployment.
</FONT>
<P>  </dl>
</ol>

<BR>
<BR>

<A NAME="19434"> </A>
<A NAME="Deploying the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Deploying the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="18251"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">In this section, you will learn how to deploy the JDBC TRANSACTIONS sample application.
</FONT>
<P>

<P>

<A NAME="18256"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Command Line-based Deployment describes how to manually register the application in Sun ONE Application Server using a Command Line Interface (CLI). This is the fastest means of deploying the sample application.
</FONT>
<P><A NAME="18260"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">

<A NAME="18286"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a complete EAR file is supplied, the fastest means of setting up the application is to use the command line utilities as described in this section.
</FONT>
<P>

<A NAME="18273"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The pre-built <FONT FACE="courier, couriernew, monospaced size">jdbc-transactions.ear</FONT> file is a Enterprise Archive file that contains the JAR file of the application. Within the JAR file resides the XML deployment descriptor files, application class files,  and other content required by the application. 
</FONT>
<P>

<A NAME="18274"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Deploying the pre-built <FONT FACE="courier, couriernew, monospaced size">jdbc-transactions.ear</FONT> file is simple. Deploy either by <A HREF="index.html#18308"  >Using the asant script</A> or by <A HREF="index.html#19456"  >Using the asadmin command</A>. 
</FONT>
<P>
<BR>
<P>
<A NAME="18308"> </A>
<A NAME="Using the asant script"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Using the asant script
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="18309"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the <FONT FACE="courier, couriernew, monospaced size">src</FONT> directory of  the sample. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="18310"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/src</FONT>
</FONT>
<P>  </dl>
<A NAME="18311"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Run asant using deploy task. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="18312"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">%asant deploy</FONT>
</FONT>
<P>  </dl>
</ol>
<BR>
<P>
<A NAME="19456"> </A>
<A NAME="Using the asadmin command"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Using the asadmin command
</B>
</FONT>
<BR>
<BR>
<ol type="1">
<A NAME="19482"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/</FONT>
</FONT>
<P><A NAME="19500"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="19506"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin deploy -u &lt;user-name&gt; -w &lt;password&gt; -H &lt;hostname&gt; -p &lt;admin server port&gt; --instance &lt;instance name&gt; jdbc-transactions.ear</FONT>
</FONT>
<P>  </dl>
</ol>

<A NAME="19520"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The deployment process involves the following operations: 
</FONT>
<P>
<ul>
<A NAME="19521"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Authenticates against the local application server's administrative server
</FONT>
<P><A NAME="19522"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The EAR file is transferred to the administrative server
</FONT>
<P><A NAME="19523"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
The administrative server begins the registration process:
</FONT>
<P>  <ul>
<A NAME="19524"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Parses the EAR file and embedded JAR file
</FONT>
<P><A NAME="19525"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Explodes the bits into repository
</FONT>
<P><A NAME="19526"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Registers the J2EE application "jdbc-transactions" by updating <FONT FACE="courier, couriernew, monospaced size">server.xml</FONT>
</FONT>
<P>  </ul>
</ul>

<A NAME="19529"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you would like to verify the registration of the application, you may proceed to <A HREF="/C:/Documents%20and%20Settings/Kristy%20Tanguay/My%20Documents/SUN%20STUFF/iAS7.0/JDBC_TRANSACTIONS/index.html#65319"  >Verifying Deployment</A>.  Otherwise, proceed to <A HREF="index.html#19746"  >Running the Sample Application</A>.
</FONT>
<P>
<P>
<BR>
<A NAME="19560"> </A>
<A NAME="Verifying Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Verifying Deployment
</FONT>
<BR>
<BR>



<A NAME="14912"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">As an optional step, you can use the Sun ONE Application Server Administration Tool to verify that the application has been registered. Otherwise, proceed directly to <A HREF="index.html#19746"  >Running the Sample Application</A>.
</FONT>
<P>

<A NAME="14915"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To verify the registration of the application, do the following:
</FONT>
<P>

<A NAME="15737"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Execute the command <FONT FACE="courier, couriernew, monospaced size">asadmin list-components</FONT> to look at applications deployed with a server instance. For example:
</FONT>
<P>

<A NAME="18679"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><FONT FACE="courier, couriernew, monospaced size">asadmin list-components -u &lt;username&gt; -w &lt;password&gt; -H &lt;host&gt; -p &lt;admin-port&gt; &lt;server instance name&gt;.</FONT>
</FONT>
<P>

<A NAME="17411"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You will see <FONT FACE="courier, couriernew, monospaced size">jdbc-transactions</FONT> listed.
</FONT>
<P>
<BR>
<P>
<A NAME="19587"> </A>
<A NAME="Undeploy the application "> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Undeploy the application 
</B>
</FONT>
<BR>
<BR>

<A NAME="19588"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you wish to undeploy the application after successful deployment, you may do so by either <A HREF="index.html#19590"  >Using the asant script</A> or by <A HREF="index.html#19594"  >Using the asadmin command</A>.
</FONT>
<P>
<BR>
<P>
<A NAME="19590"> </A>
<A NAME="Using the asant script "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Using the asant script 
</B>
</FONT>
<BR>
<ol type="1">
<A NAME="19591"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/src</FONT>
</FONT>
<P><A NAME="19592"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="19696"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant undeploy</FONT>
</FONT>
<P>  </dl>
</ol>
<BR>
<P>
<A NAME="19594"> </A>
<A NAME="Using the asadmin command "> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Using the asadmin command 
</B>
</FONT>
<BR>
<ol type="1">
<A NAME="19596"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/samples/jdbc/transactions/src</FONT>
</FONT>
<P><A NAME="19597"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Execute the following:
</FONT>
<P>  <dl>
     <DT> <A NAME="19683"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin undeploy -u &lt;user-name&gt; -w &lt;password&gt; -H &lt;hostname&gt; -p &lt;admin server port&gt; --instance &lt;instance name&gt; jdbc-transactions</FONT>
</FONT>
<P>  </dl>
</ol>

<BR>
<BR>

<A NAME="19746"> </A>
<A NAME="Running the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Running the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="19762"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The schema/table are prepopulated so you don't need to configure the database. When the application is deployed, the jdbc-connection-pool and jdbc-resource are already taken care of. If you want to understand how to create/delete the jdbc-connection-pool/jdbc-resource, please refer to <FONT FACE="courier, couriernew, monospaced size">build.xml</FONT>.
</FONT>
<P>

<A NAME="19766"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">After the application is deployed,&nbsp; run the client by: <br>&nbsp; s1as_install_dir/bin/appclient -client s1as_install_dir/domains/&lt;domain-instance>/&lt;server-instance>/applications/j2ee-apps/jdbc-transactions_1/jdbc-transactionsClient.jar
<p>The result should be:
<br>&nbsp;&nbsp;&nbsp; status = shipped

</FONT>
<P>

<BR>
<BR>

<A NAME="15009"> </A>
<A NAME="Troubleshooting"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Troubleshooting
<HR SIZE="2" NOSHADE>
</FONT>
<BR>

<ul>
<A NAME="18934"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Please make sure that you run <FONT FACE="courier, couriernew, monospaced size">asant undeploy</FONT> before redeploying this sample. Thiss will ensure that all modules are undeployed and the resources are disabled.
</FONT>
<P><A NAME="19823"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
If you encounter problems when running the application, review the log files at <FONT FACE="courier, couriernew, monospaced size">s1as_install_dir/domains/&lt;domain-instance&gt; /&lt;server-instance&gt;/logs/server.log</FONT> to learn what exactly went wrong. 
</FONT>
<P></ul>



   </BLOCKQUOTE>
</BOOKCONTENT>

<FOOTERCONTENT>
   <BLOCKQUOTE>
 <BR>
           
        <HR NOSHADE SIZE="1">


   
<!-- start copyright -->
<font face="Helvetica, Arial, sans-serif" size="-2">
Copyright &#169; 2002 <a href="http://sun.com">Sun Microsystems, Inc.</a> 
All rights reserved.
</font>
<!--  end copyright  -->
   </BLOCKQUOTE>
   <FONT FACE="Helvetica, Arial, sans-serif" SIZE="-2">
   <P ALIGN="RIGHT">Last Updated <B>July 11, 2002</B>
   </FONT>
   <BR>

</FOOTERCONTENT>

</MAINCONTENT>

</BODY>


</HTML>
