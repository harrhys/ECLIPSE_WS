<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <meta name="keywords" content="electronic commerce, ecommerce, ebusiness, e-business, e-commerce, enterprise software, net economy, Sun Microsystems, Sun Open Network Environment, Sun ONE, internet software">
        <meta name="description" content="Sun Microsystems, Inc., is delivering Sun ONE e-commerce software and enterprise solutions that enable companies to compete successfully in the Net Economy.">
	<META NAME="TEMPLATEBASE" manual wdt 1.7.0 OAK

rebranded for Sun ONE
06-18-02">
	<meta name="LastUpdated" content="08/09/02 13:15:23">
	<title>CORBA Interoperability Sample Application:  Servlets Accessing Backend CORBA Objects via IONA Orbix</title>
</head>

<body text="#000000" link="10% #594fbf" vlink="#594fbf" alink="#333366" bgcolor="#FFFFFF">


<MAINCONTENT>

<NAVIGATIONCONTENT>
   <table width="100%" border="0" cellspacing="4">
      <tr>
         <td VALIGN="TOP">
            <A HREF="http://wwws.sun.com/software">
              <IMG SRC="../../../docs/images/SunONE.jpg" alt="Sun ONE logo" 
                valign="BOTTOM"
                height="40" width="120" border="0"></A>
             &nbsp;&nbsp;&nbsp;&nbsp;
            <a href="../../ejbsample/docs/index.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Previous
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;
<a href="../../docs/contents.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Contents
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;


<a href="../../docs/singleton-orbix.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Next
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;
         </td>
     </tr>

      <tr>
         <td valign="TOP" align="RIGHT" BGCOLOR="#594fbf">
            <FONT FACE="Helvetica, Arial, sans-serif" COLOR="#ffffff" SIZE="-1"><B>
            CORBA Interoperability Sample Application</B></FONT>
         </td>
      </tr>

   </table>
   <BR>
</NAVIGATIONCONTENT>

<BOOKCONTENT>
   <blockquote>
<BR>
<BR>

      <A NAME="8063"> </A>
<A NAME="Servlets Accessing Backend CORBA Objects via IONA Orbix"> </A>
<FONT FACE="Helvetica, Arial, Sans-Serif" SIZE="+1" COLOR="#000000">
<B>
Servlets Accessing Backend CORBA Objects via IONA Orbix
</B>
</FONT>
<BR>
<BR>
<BR>

<A NAME="15022"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This document describes how to utilize the CORBA Interoperability sample application in conjunction with Sun ONE Application Server version 7.
</FONT>
<P>

<A NAME="15026"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This sample application document contains the following sections:
</FONT>
<P>
<ul>
<A NAME="15030"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15047"  >Overview</A>
</FONT>
<P><A NAME="15034"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15486"  >Compiling and Assembling the Application</A>
</FONT>
<P><A NAME="15038"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15189"  >Deploying the Sample</A>
</FONT>
<P><A NAME="15042"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15247"  >Running the Sample Application</A>
</FONT>
<P><A NAME="15046"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15263"  >Troubleshooting</A>
</FONT>
<P></ul>

<BR>
<BR>

<A NAME="15047"> </A>
<A NAME="Overview"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Overview
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15495"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">This example application demonstrates how a very simple servlet can call methods of a remote CORBA object based on using Orbix as the underlying
</FONT>
<P>

<A NAME="15496"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">ORB. Since the servlet accesses the "SimpleObject" CORBA object that is part of the Orbix demo applications, you must first ensure that you've run the Orbix demo application in the Orbix environment, before running this Sun ONE sample application. 
</FONT>
<P>

<A NAME="15499"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Initialization of multiple ORBs  in this sample is avoided through the use of a singleton class. Regardless of the number of instances of the Servlet created by the Servlet container, the singleton approach ensures that at most one instance of the ORB is created for the entire application. To learn more about how the singleton design pattern has been used in this sample, review the <A HREF="../../docs/singleton-orbix.html#8063"  >Using a Singleton for ORB Initialization</A> document. 
</FONT>
<P>

<A NAME="15523"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><A HREF="index.html#15063"  >Figure&nbsp;3</A> depicts the main components of this sample: 
</FONT>
<P>

<A NAME="15061"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><br><img src="../../docs/images/servlet-backend-corba.gif" align="baseline" hspace="2">

<br>
</FONT>
<P>

<A NAME="15063"> </A>
<ALIGN="LEFT">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Figure 3	&nbsp&nbsp CORBA sample stucture
</B>
</FONT>
<P><P>
<BR>
<A NAME="15481"> </A>
<A NAME="Setting Up the Environmentl"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Setting Up the Environmentl
</FONT>
<BR>
<BR>



<A NAME="15531"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Setting up third party ORBs in Sun ONE Application Server describes how to setup and run the Orbix "SimpleObject" demo application in a standalone mode prior to following the instructions to run it with Sun ONE Application Server. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more infomration.
</FONT>
<P>

<BR>
<BR>

<A NAME="15486"> </A>
<A NAME="Compiling and Assembling the Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Compiling and Assembling the Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15487"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Although the pre-built XML deployment descriptors are included with the sample, includes preset values of environment setting, these values may not match your ORB installation path. The first step in assembling the sample is to modify the environment settings.
</FONT>
<P>

<A NAME="15071"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">There are two locations where you have to modify the settings as per your ORB installation:
</FONT>
<P>
<ul>
<A NAME="15075"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15091"  >Modifying web.xml CORBA Environment Settings</A> Settings (Web Deployment descriptor)
</FONT>
<P><A NAME="15079"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15168"  >Modifying The Build File</A> (<FONT FACE="courier, couriernew, monospaced size">build.xml</FONT>)
</FONT>
<P></ul>

<A NAME="15082"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">After changing the environment settings , go to <A HREF="index.html#15180"  >Compiling and Assembling the Application Using Ant Build Facility</A>.  The fastest means of setting up the application is to use the <A HREF="index.html#15192"  >Command Line Interface (CLI)-based Deployment</A>. If you would like to deploy through Admin GUI, then follow instructions for <A HREF="index.html#15209"  >Web Interface (GUI)-based Deployment</A>.
</FONT>
<P>
<P>
<BR>
<A NAME="15091"> </A>
<A NAME="Modifying web.xml CORBA Environment Settings"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Modifying web.xml CORBA Environment Settings
</FONT>
<BR>
<BR>



<A NAME="15092"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The sample web application relies on several J2EE environment settings to access the Orbix ORB domain location and several Interoperable Object Reference (IOR) files. Preset values are included in the pre-built EAR, but these default values are unlikely to suit your ORB installation path. (Since this is a 'simple' sample, IOR files are used in place of dynamic lookups through a CORBA naming service). 
</FONT>
<P>

<A NAME="15096"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><A HREF="index.html#15100"  >Table&nbsp;2</A> lists the environment settings required by the sample web application. These settings are available in the <FONT FACE="courier, couriernew, monospaced size">web.xml</FONT> file,  which is under the <FONT FACE="courier, couriernew, monospaced size">src/</FONT> directory of the sample application. If you are using the <A HREF="../../../../docs/ant.html">Ant Build facility</A><I> </I>to rebuild the sample application, then you can simply change the settings as they appear in the <FONT FACE="courier, couriernew, monospaced size">web.xml</FONT> file and rebuild the application.
</FONT>
<P>

<A NAME="15123"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">  <BR>
<P>
<TABLE WIDTH="90%" BORDER="1" CELLPADDING="5" CELLSPACING="0">
  <CAPTION></CAPTION><P><FONT FACE=""><B>
<A NAME="15100"> </A>
<A NAME="Required Environment Settings"> </A>
<ALIGN="LEFT">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Table 2	&nbsp&nbsp Required Environment Settings
</B>
</FONT>
</B></FONT>
<BR>
<BR>
  <TR BGCOLOR="#CCCCCC" ALIGN=LEFT VALIGN=TOP>
    <TH VALIGN="TOP" ALIGN="LEFT" SCOPE="COL"><A NAME="15104"> </A>
<P ALIGN="LEFT">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Environment Name
</B>
</FONT>
</TH>
    <TH VALIGN="TOP" ALIGN="LEFT" SCOPE="COL"><A NAME="15106"> </A>
<P ALIGN="LEFT">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Description
</B>
</FONT>
</TH>
  </DIV></TR>
  <TR>
    <TD VALIGN=TOP>
<P>
<A NAME="15108"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">orbDomainName</FONT>
</FONT>&nbsp;</TD>
    <TD VALIGN=TOP>
<P>
<A NAME="15110"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Name of ORB domain.
</FONT>&nbsp;</TD>
  </TR>
  <TR>
    <TD VALIGN=TOP>
<P>
<A NAME="15112"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">orbCfgDir</FONT>
</FONT>&nbsp;</TD>
    <TD VALIGN=TOP>
<P>
<A NAME="15114"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Location of domain configuration file.
</FONT>&nbsp;</TD>
  </TR>
  <TR>
    <TD VALIGN=TOP>
<P>
<A NAME="15116"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">simpleObjectIor1</FONT>
</FONT>&nbsp;</TD>
    <TD VALIGN=TOP>
<P>
<A NAME="15118"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
IOR file used to access first CORBA object. Produced when the Orbix sample build script is executed.
</FONT>&nbsp;</TD>
  </TR>
  <TR>
    <TD VALIGN=TOP>
<P>
<A NAME="15120"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">simpleObjectIor2</FONT>
</FONT>&nbsp;</TD>
    <TD VALIGN=TOP>
<A NAME="15122"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">IOR file used to access second CORBA object. Produced when the Orbix sample build script is executed.
</FONT>
<P>
&nbsp;</TD>
  </TR>
</TABLE>



<P>
</FONT>
<P>

<A NAME="15124"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Modifying these settings in the <FONT FACE="courier, couriernew, monospaced size">web.xml</FONT> file is preferred because the changes will be present each time you deploy the application to the application server.
</FONT>
<P>

<A NAME="15125"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To modify the environment setting in the <FONT FACE="courier, couriernew, monospaced size">web.xml</FONT> file, do the following:
</FONT>
<P>
<ol type="1">
<A NAME="15126"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="4"></B>
Edit <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/servletsample/src/web.xml</FONT>
</FONT>
<P><A NAME="15586"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="5"></B>
Change the environment settings listed in <A HREF="index.html#15100"  >Table&nbsp;2</A> to match your ORB installation:
</FONT>
<P>  <ul>
<A NAME="15131"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On Windows:
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15132"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
...
</FONT>
<P>       <DT> <A NAME="15133"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15134"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;orbCfgDir&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15135"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>c:\&lt;domain_path&gt;\domains</B></FONT>&lt;/env-entry-value&gt;
</FONT>
<P>       <DT> <A NAME="15136"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
</FONT>
<P>       <DT> <A NAME="15137"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15138"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15139"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;simpleObjectIor1&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15140"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>c:\&lt;orb_installpath&gt;\demos\corba\orb\simple1.ior</B></FONT>&lt;/env-entry-value&gt;
</FONT>
<P>       <DT> <A NAME="15141"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
</FONT>
<P>       <DT> <A NAME="15142"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15143"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15144"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;simpleObjectIor2&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15145"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>c:\&lt;orb_installpath&gt;\demos\corba\orb\simple2.ior</B></FONT>&lt;/env-entry-value&gt;
</FONT>
<P>       <DT> <A NAME="15146"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
</FONT>
<P>       <DT> <A NAME="15147"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15148"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
...
</FONT>
<P>    </dl>
</dl><A NAME="15149"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On Solaris:
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15150"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
...
</FONT>
<P>       <DT> <A NAME="15151"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15152"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;orbCfgDir&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15153"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>/&lt;domain_path&gt;/domains</B></FONT>&lt;/env-entry-value&gt;
</FONT>
<P>       <DT> <A NAME="15154"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt;
</FONT>
<P>       <DT> <A NAME="15155"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15156"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt;
</FONT>
<P>       <DT> <A NAME="15157"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;simpleObjectIor1&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15158"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>/&lt;orb_installpath&gt;/demos/corba/orb/simple1.ior</B></FONT>&lt;/env-entry-value&gt; 
</FONT>
<P>       <DT> <A NAME="15159"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt; 
</FONT>
<P>       <DT> <A NAME="15160"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt; 
</FONT>
<P>       <DT> <A NAME="15161"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry&gt; 
</FONT>
<P>       <DT> <A NAME="15162"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-name&gt;simpleObjectIor2&lt;/env-entry-name&gt;
</FONT>
<P>       <DT> <A NAME="15163"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-value&gt;<FONT FACE="courier, couriernew, monospaced size"><B>/&lt;orb_installpath&gt;/demos/corba/orb/simple2.ior</B></FONT>&lt;/env-entry-value&gt; 
</FONT>
<P>       <DT> <A NAME="15164"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;env-entry-type&gt;java.lang.String&lt;/env-entry-type&gt; 
</FONT>
<P>       <DT> <A NAME="15165"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;/env-entry&gt; 
</FONT>
<P>       <DT> <A NAME="15166"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
...
</FONT>
<P>    </dl>
</dl>  </ul>
</ol>
<P>
<BR>
<A NAME="15168"> </A>
<A NAME="Modifying The Build File"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Modifying The Build File
</FONT>
<BR>
<BR>



<A NAME="15169"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Before recompilation and reassembling the sample, you will need to modify the build file to reflect the installation location of your ORB.
</FONT>
<P>
<ol type="1">
<A NAME="15170"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Under the directory <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/servletsample/src/</FONT>
</FONT>
<P><A NAME="15171"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Edit the <FONT FACE="courier, couriernew, monospaced size">build.xml</FONT> file by modifying the following property to suit your ORB installation environment:
</FONT>
<P>  <dl>
     <DT> <A NAME="15172"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
On Windows:
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15173"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;!-- OMG CORBA Classes --&gt;
</FONT>
<P>       <DT> <A NAME="15174"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;property name="orb.installpath" value="&lt;orb_installpath"/&gt;
</FONT>
<P>    </dl>
</dl>     <DT> <A NAME="15175"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
On Solaris:
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15176"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;!-- OMG CORBA Classes --&gt;
</FONT>
<P>       <DT> <A NAME="15177"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
&lt;property name="orb.installpath" value="&lt;<FONT FACE="courier, couriernew, monospaced size"><B>orb_installpath</B></FONT>&gt;"/&gt;
</FONT>
<P>    </dl>
</dl>  </dl>
</ol>

<A NAME="15178"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">These modifications will enable you to easily compile and reassemble the sample application. If you don't make this change, the servlet source code will not compile because it will not be able to access the OMG ORB classes.
</FONT>
<P>
<P>
<BR>
<A NAME="15180"> </A>
<A NAME="Compiling and Assembling the Application Using Ant Build Facility"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Compiling and Assembling the Application Using Ant Build Facility
</FONT>
<BR>
<BR>



<A NAME="15183"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To compile and assemble the application using <A HREF="../../../../docs/ant.html">Ant Build Facility</A>, do the following:
</FONT>
<P>
<ul>
<A NAME="15184"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
On UNIX, prior to executing the build command, you need to ensure that <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/bin</FONT> is in your PATH.
</FONT>
<P><A NAME="15185"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
Rebuild the application by executing the <FONT FACE="courier, couriernew, monospaced size">asant</FONT> command under the <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/servletsample/src/</FONT> directory. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="15186"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asant</FONT>
</FONT>
<P>  </dl>
</ul>

<A NAME="15187"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Executing the build command will compile the application source files and reassemble both the WAR and EAR files. The EAR file will be placed in <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/servletsample/assemble/ear/.</FONT>
</FONT>
<P>

<A NAME="15188"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You are now ready to follow either the <A HREF="index.html#15192"  >Command Line Interface (CLI)-based Deployment</A> or <A HREF="index.html#15209"  >Web Interface (GUI)-based Deployment</A> instructions. 
</FONT>
<P>

<BR>
<BR>

<A NAME="15189"> </A>
<A NAME="Deploying the Sample"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Deploying the Sample
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15190"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">After compiling and assembling the application, you can choose to deploy and register the application through either command line utilities or Sun ONE Application Server Admin GUI. The deployment procedure is same for Windows and Solaris platforms.
</FONT>
<P>
<P>
<BR>
<A NAME="15192"> </A>
<A NAME="Command Line Interface (CLI)-based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Command Line Interface (CLI)-based Deployment
</FONT>
<BR>
<BR>



<A NAME="15193"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Once you've modified the CORBA environment settings, deploying the newly built <FONT FACE="courier, couriernew, monospaced size">corba-servletsample.ear</FONT> file is simple.
</FONT>
<P>
<ol type="1">
<A NAME="15194"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Go to the directory in which the newly assembled EAR file is located. For example: <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/servletsample/assemble/ear</FONT>
</FONT>
<P><A NAME="15195"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Before executing the command line deploy utility, ensure that you have <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/bin</FONT> in your <FONT FACE="courier, couriernew, monospaced size">PATH</FONT>.
</FONT>
<P><A NAME="15196"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Execute <FONT FACE="courier, couriernew, monospaced size">iasadmin</FONT> to deploy application to the particular application server instance. For example: 
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15639"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
asadmin deploy --type application --instance &lt;instance name&gt; --host &lt;hostname.domainname&gt; --port &lt;admin port&gt;
</FONT>
<P>       <DT> <A NAME="15198"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
     --user &lt;admin user&gt; --password &lt;admin pass&gt; --name &lt;app root name&gt; --force=true corba-servletsample.ear
</FONT>
<P>    </dl>
</dl><A NAME="15199"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="4"></B>
Alternatively, under the <FONT FACE="courier, couriernew, monospaced size">src/ </FONT>directory, you can execute following command to deploy the application to the default application server instance installed on localhost.
</FONT>
<P><dl>    <dl>
       <DT> <A NAME="15200"> </A>
<FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
asant deploy
</FONT>
<P>    </dl>
</dl></ol>

<A NAME="15203"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you would like to verify the registration of the application, proceed to <A HREF="index.html#15237"  >Verifying Registration</A>. Otherwise, you're ready to exercise the application by <A HREF="index.html#15247"  >Running the Sample Application</A>.
</FONT>
<P>
<P>
<BR>
<A NAME="15209"> </A>
<A NAME="Web Interface (GUI)-based Deployment"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Web Interface (GUI)-based Deployment
</FONT>
<BR>
<BR>



<A NAME="15210"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The Sun ONE Admininstration Tool GUI provides an easy way of deploying applications to Sun ONE Application Server. 
<BR>
<HR SIZE="1">
<TABLE BORDER="0" CELLPADDING="5" WIDTH="75%">
  <TR>
    <TD VALIGN=TOP>
<A NAME="15213"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Note
</B>
</FONT>

</TD>
    <TD VALIGN=TOP>
<A NAME="15215"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Before proceeding, you must ensure that the application is repackaged with modified deployment descriptors containing the environment setting in accordance with your ORB installation. 
</FONT>
<P>
</TD>
  </TR>
</TABLE>

<HR SIZE="1">
<BR>

</FONT>
<P>

<A NAME="15216"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Since a prebuilt Enterprise Archive (EAR) file for the sample application is included with the application server, you can deploy it to the application server if your ORB installation is set to default or first build the application using <A HREF="../../../../docs/ant.html">Ant Build Facility</A><I> </I>and use this EAR file for deployment.
</FONT>
<P>
<ol type="1">
<A NAME="15219"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Open the browser and go to the admin server. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="15220"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">http://&lt;host&gt;:&lt;admin port&gt;/</FONT>
</FONT>
<P>  </dl>
<A NAME="15221"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Login as Admin user.
</FONT>
<P><A NAME="15222"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
Go to <FONT FACE="courier, couriernew, monospaced size">Application Server Instances -&gt; server1 (or any other instance)  -&gt; Applications</FONT>
</FONT>
<P>  <dl>
     <DT> <A NAME="15223"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Click on the link Enterprise Applications.
</FONT>
<P>     <DT> <A NAME="15224"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
You will see the deployed j2ee applications on this server instance here.
</FONT>
<P>  </dl>
<A NAME="15225"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="4"></B>
Click on the Deploy tab to deploy your application.
</FONT>
<P><A NAME="15226"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="5"></B>
Give the absolute location of your Application EAR file
</FONT>
<P>  <dl>
     <DT> <A NAME="15227"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
or 
</FONT>
<P>     <DT> <A NAME="15228"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Navigate to <FONT FACE="courier, couriernew, monospaced size">&lt;Sun-ONE-AS-install_dir&gt;/samples/corba/ejb/assemble/ear</FONT> and open the <FONT FACE="courier, couriernew, monospaced size">corba-servletsample.ear</FONT> file.
</FONT>
<P>  </dl>
<A NAME="15229"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="6"></B>
Click OK.
</FONT>
<P><A NAME="15230"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="7"></B>
After uploading your application EAR file, the GUI will ask you for a AppName.
</FONT>
<P>  <dl>
     <DT> <A NAME="15231"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
Type any appropriate <FONT FACE="courier, couriernew, monospaced size">AppRoot</FONT> directory name and click OK.
</FONT>
<P>  </dl>
</ol>

<A NAME="15232"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you have deployed the application successfully, this application will be listed under Deployed Applications. After the application is deployed you can proceed to <A HREF="index.html#15247"  >Running the Sample Application</A>.
</FONT>
<P>
<BR>
<P>
<A NAME="15237"> </A>
<A NAME="Verifying Registration"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Verifying Registration
</B>
</FONT>
<BR>
<BR>

<A NAME="15238"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">To verify the registration of the application, do the following:
</FONT>
<P>
<ol type="1">
<A NAME="15239"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
In the Admin GUI go to <FONT FACE="courier, couriernew, monospaced size">Application Server Instances -&gt; server1 (or any other instance)  -&gt; Applications.</FONT>
</FONT>
<P><A NAME="15240"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Click on the link  Enterprise Applications.
</FONT>
<P>  <dl>
     <DT> <A NAME="15241"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
You will see the deployed j2ee applications on this server instance.
</FONT>
<P>  </dl>
<A NAME="15244"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="4"></B>
You can also execute the <FONT FACE="courier, couriernew, monospaced size">asadmin</FONT> command to look at applications deployed with a server instance. For example:
</FONT>
<P>  <dl>
     <DT> <A NAME="15652"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">asadmin list-components -u </FONT>&lt;<I>username</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -w</FONT>&lt;<I>password</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -H </FONT>&lt;<I>host</I>&gt;<FONT FACE="courier, couriernew, monospaced size"> -p </FONT>&lt;<I>admin-port</I>&gt;&lt;<I>server instance name</I>&gt;</FONT></FONT>
<P>  </dl>
</ol>

<BR>
<BR>

<A NAME="15247"> </A>
<A NAME="Running the Sample Application"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Running the Sample Application
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15248"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Prior to running the sample, ensure that you have performed the following steps:
</FONT>
<P>
<ol type="1">
<A NAME="15249"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="1"></B>
Run the Orbix <FONT FACE="courier, couriernew, monospaced size">SimpleObject</FONT> sample in standalone mode outside of Sun ONE Application Server.
</FONT>
<P><A NAME="15250"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="2"></B>
Started the server side CORBA object.
</FONT>
<P></ol>

<A NAME="15254"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> to see how to setup and run the Orbix "SimpleObject" demo application in a standalone mode prior to running the servlet application in the application server.
</FONT>
<P>
<ol type="1">
<A NAME="15255"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li value="3"></B>
After you've started the Orbix services and the server side CORBA object, run the application by accessing: 
</FONT>
<P>  <dl>
     <DT> <A NAME="15256"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<FONT FACE="courier, couriernew, monospaced size">http://&lt;application server hostname&gt;:&lt;instance http port&gt;/corba-servletsample/CorbaClientServlet</FONT>
</FONT>
<P>  </dl>
</ol>

<A NAME="15257"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">You should see the following output in your browser:
</FONT>
<P>

<A NAME="15261"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><br><img src="../../docs/images/browser-backend-servlet-orbix.gif" align="baseline" hspace="2">

<br>
</FONT>
<P>

<A NAME="15262"> </A>
<ALIGN="LEFT">
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>
Figure 4	&nbsp&nbsp Servlet accessing backend CORBA server
</B>
</FONT>
<P>
<BR>
<BR>

<A NAME="15263"> </A>
<A NAME="Troubleshooting"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Troubleshooting
<HR SIZE="2" NOSHADE>
</FONT>
<BR>


<A NAME="15264"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Although the sample web application contains limited exception handling, it should provide you with a sense of some of the failure scenarios and basic recovery techniques that apply when accessing remote CORBA objects from within the application server. 
</FONT>
<P>
<P>
<BR>
<A NAME="15265"> </A>
<A NAME="Servlet Initialization Failures"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Servlet Initialization Failures
</FONT>
<BR>
<BR>



<A NAME="15689"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Servlet may issue a <FONT FACE="courier, couriernew, monospaced size">ServletException</FONT> during the servlet's <FONT FACE="courier, couriernew, monospaced size">init()</FONT> method due to any one of the following actions: 
</FONT>
<P>
<ul>
<A NAME="15267"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
By not including the Orbix classes in the application server's <FONT FACE="courier, couriernew, monospaced size">CLASSPATH</FONT>
</FONT>
<P><A NAME="15268"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
By renaming or deleting one or more of the environment settings contained in the web application
</FONT>
<P><A NAME="15269"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
By renaming one of the IOR files
</FONT>
<P><A NAME="15270"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
By not starting the Orbix services
</FONT>
<P></ul>
<P>
<BR>
<A NAME="15271"> </A>
<A NAME="Post Initialization Failures"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Post Initialization Failures
</FONT>
<BR>
<BR>



<A NAME="15272"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you stop the server side CORBA object server and rerun the servlet application, you will notice that the servlet will catch the CORBA exceptions and attempt to reinitialize object references. These attempts will fail until you restart the CORBA object server.
</FONT>
<P>

<A NAME="15273"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Upon restarting the CORBA object server and attempting to rerun the servlet application, you should observe that the client successfully reinitializes the object references and access the remote methods.
</FONT>
<P>
<P>
<BR>
<A NAME="15274"> </A>
<A NAME="Run time errors"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Run time errors
</FONT>
<BR>
<BR>



<A NAME="15275"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Ensure that you've started the Orbix services as well as the CORBA server prior to running the application.
</FONT>
<P>

<A NAME="15276"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">The following errors are described in this section:
</FONT>
<P>
<ul>
<A NAME="17061"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15294"  >CORBA.OBJ_ADAPTER Error</A>
</FONT>
<P><A NAME="17062"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#15327"  >NoClassDefFoundError</A>
</FONT>
<P><A NAME="17063"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#16263"  >java.lang.NullPointerException</A>
</FONT>
<P><A NAME="15760"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#16092"  >CORBA.TRANSIENT Exception</A>
</FONT>
<P><A NAME="15765"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="-1">
<B>  <li></B>
<A HREF="index.html#16665"  >Class Cast Exception</A>
</FONT>
<P></ul>
<BR>
<P>
<A NAME="15294"> </A>
<A NAME="CORBA.OBJ_ADAPTER Error"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
CORBA.OBJ_ADAPTER Error
</B>
</FONT>
<BR>
<BR>

<A NAME="15775"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you encounter the following messages in the Server log file, then you have not configured the application server to use the Orbix ORB classes. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more details.
</FONT>
<P>

<A NAME="15299"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Browser output:
</FONT>
<P>
<A NAME="15786"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Invoking method on first object.

</FONT>
<P><A NAME="15818"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Caught exception: org.omg.CORBA.OBJ_ADAPTER: vmcid: SUN minor code: 
202 completed: No (Minor code meaning not found)Server log:

</FONT>
<P>
<A NAME="15838"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Server Log:
</FONT>
<P>
<A NAME="15852"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:19:13:15] INFO (10660): CorbaClientServlet: Invoking 
method on first object.

</FONT>
<P><A NAME="15853"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:19:13:15] INFO (10660): creating connection to 
EndPoint: EndPoint

</FONT>
<P><A NAME="15854"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[IIOP_CLEAR_TEXT:129.158.228.203:38717:false]

</FONT>
<P><A NAME="15855"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:19:13:15] INFO (10660): Caught exception: 
org.omg.CORBA.OBJ_ADAPTER:   vmcid: SUN  minor code: 202  completed: 
No (Minor code meaning not found)

</FONT>
<P><BR>
<P>
<A NAME="15327"> </A>
<A NAME="NoClassDefFoundError"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
NoClassDefFoundError
</B>
</FONT>
<BR>
<BR>

<A NAME="15905"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">If you encounter the following messages in the Server log file, then you have not configured the application server to use the Orbix ORB classes. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more details.
</FONT>
<P>

<A NAME="15332"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Browser output:
</FONT>
<P>
<A NAME="15923"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
exception 

</FONT>
<P><A NAME="15924"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">


</FONT>
<P><A NAME="15925"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
javax.servlet.ServletException: Servlet.init() for servlet 
CorbaClientServlet threw exception at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:935) at 
org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.j
ava:653) 

</FONT>
<P><A NAME="15928"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
... 

</FONT>
<P><A NAME="15929"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">


</FONT>
<P><A NAME="15930"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
root cause 

</FONT>
<P><A NAME="15931"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">


</FONT>
<P><A NAME="15932"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
java.lang.NoClassDefFoundError: 
com/iona/corba/util/SystemExceptionDisplayHelper at 
samples.corba.common.OrbSingleton.(OrbSingleton.java:40) at 
samples.corba.common.OrbSingleton.getInstance(OrbSingleton.java:51) 

</FONT>
<P><A NAME="16087"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
...

</FONT>
<P>
<A NAME="16088"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Server log: 
</FONT>
<P>
<A NAME="16101"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:29:27] INFO (10467): CorbaClientServlet: init 

</FONT>
<P><A NAME="16102"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:29:27] SEVERE (10467): 
StandardWrapperValve[CorbaClientServlet]: Allocate exception for

</FONT>
<P><A NAME="16103"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
servlet  CorbaClientServlet javax.servlet.ServletException: 
Servlet.init() for servlet CorbaClientServlet threw exception at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:935) at 
org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.j
ava:653) 

</FONT>
<P><A NAME="16107"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
... 

</FONT>
<P><A NAME="16108"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">


</FONT>
<P><A NAME="16109"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
----- Root Cause ----- 

</FONT>
<P><A NAME="16110"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
java.lang.NoClassDefFoundError: 
com/iona/corba/util/SystemExceptionDisplayHelper at 
samples.corba.common.OrbSingleton.&lt;init&gt;(OrbSingleton.java:40) at 
samples.corba.common.OrbSingleton.getInstance(OrbSingleton.java:51)

</FONT>
<P><BR>
<P>
<A NAME="16263"> </A>
<A NAME="java.lang.NullPointerException"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
java.lang.NullPointerException
</B>
</FONT>
<BR>
<BR>

<A NAME="16277"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Double check the <FONT FACE="courier, couriernew, monospaced size">CLASSPATH</FONT> of the application server to ensure that the name of the directory under which the <FONT FACE="courier, couriernew, monospaced size">licenses.txt</FONT> file is located is part of the <FONT FACE="courier, couriernew, monospaced size">CLASSPATH</FONT>. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more details.
</FONT>
<P>

<A NAME="16295"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Browser output:
</FONT>
<P>
<A NAME="16315"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
exception 

</FONT>
<P><A NAME="16317"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
javax.servlet.ServletException: Servlet.init() for servlet 
CorbaClientServlet threw exception at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:935) at 
org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.j
ava:653) 

</FONT>
<P><A NAME="16320"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
... 

</FONT>
<P><A NAME="16322"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
root cause 

</FONT>
<P><A NAME="16323"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">


</FONT>
<P><A NAME="16324"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
java.lang.NullPointerException at 
samples.corba.servletsample.CorbaClientServlet.init(CorbaClientServ
let.java:66) at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:916)

</FONT>
<P>
<A NAME="16304"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Server log: 
</FONT>
<P>
<A NAME="16461"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:42:00] INFO (10486): CorbaClientServlet: init 

</FONT>
<P><A NAME="16462"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:42:00] SEVERE (10486): 
StandardWrapperValve[CorbaClientServlet]: Allocate exception for 
servlet 

</FONT>
<P><A NAME="16464"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
CorbaClientServlet javax.servlet.ServletException: Servlet.init() 
for servlet CorbaClientServlet threw exception at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:935) at 
org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.j
ava:653) 

</FONT>
<P><A NAME="16468"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
... 

</FONT>
<P><A NAME="16470"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
----- Root Cause ----- 

</FONT>
<P><A NAME="16471"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
java.lang.NullPointerException at 
samples.corba.servletsample.CorbaClientServlet.init(CorbaClientServ
let.java:66) at 
org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrappe
r.java:916)

</FONT>
<P><BR>
<P>
<A NAME="16092"> </A>
<A NAME="CORBA.TRANSIENT Exception"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
CORBA.TRANSIENT Exception
</B>
</FONT>
<BR>
<BR>

<A NAME="15737"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Ensure that the <FONT FACE="courier, couriernew, monospaced size">demos.simple.Server</FONT> application has been started. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more details. Upon restarting the CORBA server application and executing the servlet again, the servlet should work properly. 
</FONT>
<P>

<A NAME="16647"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Browser output:
</FONT>
<P>
<A NAME="16694"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Invoking method on first object. 

</FONT>
<P><A NAME="16695"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Caught org.omg.CORBA.TRANSIENT exception.org.omg.CORBA.TRANSIENT: 
cannot establish binding vmcid:

</FONT>
<P><A NAME="16696"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
0x49540000 minor code: 770 completed: No 

</FONT>
<P><A NAME="16697"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Invoking method on second object. 

</FONT>
<P><A NAME="16698"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Caught org.omg.CORBA.TRANSIENT exception. 

</FONT>
<P><A NAME="16666"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Done

</FONT>
<P>
<A NAME="16667"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Server log: 
</FONT>
<P>
<A NAME="16756"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:21:43] INFO (10356): CorbaClientServlet: Invoking 
method on first object. 

</FONT>
<P><A NAME="16757"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): Caught org.omg.CORBA.TRANSIENT 
exception.org.omg.CORBA.TRANSIENT:

</FONT>
<P><A NAME="16758"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
cannot establish binding  vmcid: 

</FONT>
<P><A NAME="16759"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
0x49540000  minor code: 783  completed: No 

</FONT>
<P><A NAME="16760"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Trying to 
reinitialize object refs. 

</FONT>
<P><A NAME="16761"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Invoking 
import_object() for first object 

</FONT>
<P><A NAME="16762"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Reading 
object reference from 
/space/sanju/install/orbix_2000/orbix_art/1.2/demos/simple1.ior 

</FONT>
<P><A NAME="16881"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): Invoking import_object() for 
second object 

</FONT>
<P><A NAME="16882"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Reading 
object reference from 
/space/sanju/install/orbix_2000/orbix_art/1.2/demos/simple2.ior 

</FONT>
<P><A NAME="16767"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Invoking 
narrow on first object. 

</FONT>
<P><A NAME="16751"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:22:00] INFO (10356): CorbaClientServlet: Invoking 
narrow on second object.

</FONT>
<P><BR>
<P>
<A NAME="16665"> </A>
<A NAME="Class Cast Exception"> </A>
<FONT FACE="Helvetica, Arial, sans-serif">
<B>
Class Cast Exception
</B>
</FONT>
<BR>
<BR>

<A NAME="15374"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Ensure that the <FONT FACE="courier, couriernew, monospaced size">demos.simple.Server</FONT> application has been started. Refer to the <A HREF="../../docs/E2A.html#8063"  >E2A Application Server Platform 5.1 Configuration</A> document for more details. Upon restarting the CORBA server application and executing the servlet again, the servlet should work properly. The cause of this problem is likely the same as the cause of the <A HREF="index.html#16092"  >CORBA.TRANSIENT Exception</A>, but the circumstances of the timing are different.
</FONT>
<P>

<A NAME="15017"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Browser output: 
</FONT>
<P>
<A NAME="16916"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Invoking method on first object. 

</FONT>
<P><A NAME="14674"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
Caught unexpected exception.<FONT FACE="courier, couriernew, monospaced size"><B>java.lang.ClassCastException</B></FONT>: 
com.sun.corba.ee.internal.corba.AnyImpl

</FONT>
<P>
<A NAME="15000"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2">Server log: 
</FONT>
<P>
<A NAME="16936"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:12:30] INFO (10356): CorbaClientServlet: Invoking 
method on first object. 

</FONT>
<P><A NAME="16937"></A><FONT FACE="courier, couriernew, monospaced size" SIZE="-1">
[16/Apr/2002:18:12:30] INFO (10356): Caught unexpected 
exception.<FONT FACE="courier, couriernew, monospaced size"><B>java.lang.ClassCastException</B></FONT>: 
com.sun.corba.ee.internal.corba.AnyImpl

</FONT>
<P><P>
<BR>
<A NAME="16985"> </A>
<A NAME="Further Exploration"> </A>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="+1">
Further Exploration
</FONT>
<BR>
<BR>



<A NAME="16987"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><A HREF="../../docs/singleton-orbix.html#8063"  >Using a Singleton for ORB Initialization</A> describes how to implement the singleton to manage ORB initialization. 
</FONT>
<P>

<A NAME="16989"> </A><FONT FACE="Helvetica, Arial, sans-serif" SIZE="2"><A HREF="../../ejbsample/docs/index.html#8063"  >EJB Accessing Backend CORBA Objects via IONA Orbix</A> is a simple sample of an EJB accessing the same backend CORBA object as demonstrated in the servlet example.
</FONT>
<P>



   </BLOCKQUOTE>
</BOOKCONTENT>

<FOOTERCONTENT>
   <BLOCKQUOTE>
 <BR>
            <a href="../../ejbsample/docs/index.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Previous
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;
<a href="../../docs/contents.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Contents
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;


<a href="../../docs/singleton-orbix.html">
<b>
<FONT FACE="Helvetica, Arial, sans-serif" SIZE="2" COLOR="#d12124">
Next
</FONT>
</b>
</a>
&nbsp;&nbsp;&nbsp;&nbsp;
        <HR NOSHADE SIZE="1">


   
<!-- start copyright -->
<font face="Helvetica, Arial, sans-serif" size="-2">
Copyright &#169; 2002 <a href="http://sun.com">Sun Microsystems, Inc.</a> 
All rights reserved.
</font>
<!--  end copyright  -->
   </BLOCKQUOTE>
   <FONT FACE="Helvetica, Arial, sans-serif" SIZE="-2">
   <P ALIGN="RIGHT">Last Updated <B>August 09, 2002</B>
   </FONT>
   <BR>

</FOOTERCONTENT>

</MAINCONTENT>

</body>


</html>
